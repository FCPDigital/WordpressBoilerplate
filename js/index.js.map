{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/components/carousel.js","src/js/index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","function Carousel(element) {\n  this.element = element;\n  this.headItems = this.element.querySelectorAll(\".carousel__header-item\");\n  this.items = this.element.querySelectorAll(\".carousel__body-item\"); \n  this._current = 0;\n  this.initEvents();\n}\n\nCarousel.prototype = {\n  get current() {\n    if( this._current >= 0 ) {\n      return this._current;\n    }\n    for(var i=0; i<this.headItems.length; i++) {\n      if( this.headItems[i].classList.contains(\"carousel__header-item--active\") ) {\n        return i;\n      }\n    }\n    this.current = 0; \n    return 0; \n  },\n\n  set current(value) {\n    if( value !== this.current ) {\n      this.hide(this.current);\n      setTimeout((function(){\n        this.show(value);\n      }).bind(this), 350)\n    }\n    var last = this._current; \n    this._current = value;\n    this.onChange.call(this, this.items[this.current], this.items[last], this.current);\n  },\n\n  getHead: function(rank){\n    return this.headItems[rank];\n  },\n\n  getBody: function(rank){\n    return this.items[rank];\n  },\n\n  hide: function(rank) {\n    this.headItems[rank].classList.remove(\"carousel__header-item--active\");\n    this.items[rank].classList.replace(\"carousel__body-item--visible\", \"carousel__body-item--hidding\");\n    setTimeout((function(){\n      this.items[rank].classList.replace(\"carousel__body-item--hidding\", \"carousel__body-item--hidden\");\n    }).bind(this), 350)\n  },\n\n  show: function(rank) {\n    this.headItems[rank].classList.add(\"carousel__header-item--active\");\n    this.items[rank].classList.replace(\"carousel__body-item--hidden\", \"carousel__body-item--hidding\");\n    this.items[rank].classList.replace(\"carousel__body-item--hidding\", \"carousel__body-item--visible\");\n  },\n\n  initHeadEvent: function(element, rank) {\n    var self = this;\n    element.addEventListener(\"click\", function(e){\n      self.current = rank;\n      e.preventDefault();\n    })\n  },\n\n  initEvents: function() {\n    for(var i=0; i<this.headItems.length; i++) {\n      this.initHeadEvent(this.headItems[i], i);\n    }\n  },\n\n  onChange: function(callback) {\n    this.onChange = callback;\n  }\n}\n\nexport default Carousel;","import Carousel from \"./components/carousel.js\"\n\nvar offsetTop = function(element) {\n    var top = 0, left = 0;\n    do {\n        top += element.offsetTop  || 0;\n        left += element.offsetLeft || 0;\n        element = element.offsetParent;\n    } while(element);\n\n    return {\n        top: top,\n        left: left\n    };\n};\n\nObject.defineProperties(window, {\n    scrollTop: {\n        get: function() {\n            return (document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop;\n        },\n        set: function(value) {\n            var scrollTop = ((document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop);\n            scrollTop = value;\n        }\n    }\n});\n\n\n\n\nfunction Thumbnails(element) {\n  this.element = element;\n  this.items = element.querySelectorAll(\".thumbnail\");\n  this._current = null;\n}\n\nThumbnails.prototype = {\n\n  get current(){\n    if( this._current >= 0 ){\n      return this._current;\n    }\n    this.current = 0; \n    return 0; \n  },\n\n  set current(value) {\n    if( this._current ) {\n      this.hide(this.current);\n    } \n\n    this.show(value);\n    this._current = value;\n  },\n\n  hide: function(rank) {\n    this.items[rank].classList.replace(\"thumbnail--visible\", \"thumbnail--hidden\");\n  },\n \n  show: function(rank) {\n    this.items[rank].classList.replace(\"thumbnail--hidden\", \"thumbnail--visible\");\n  }\n}\n\n\n\nfunction manageHomeCarousel(){\n  if (document.querySelector(\"#home-carousel\")) {\n    var sectionCarousel = document.querySelector(\"#anchor-2\");\n\n    var thumbnails = new Thumbnails(sectionCarousel.querySelector(\".thumbnails\"));\n    var carousel = new Carousel(document.querySelector(\"#home-carousel\"));\n    carousel.onChange = function(current, last, rank) {\n      //last.querySelector(\".btn-morph-cross\").click();\n      var toggler = TogglerManager.findByElement(last.querySelector(\".btn-morph-cross\"));\n      if( toggler && toggler.element.classList.contains(\"btn-morph-cross--active\") ) {\n        toggler.toggle();\n      }\n      thumbnails.current = rank;\n    }\n  }\n}\n\n\nfunction Toggler(element) {\n  this.element = element;\n  this.getTargets();\n  this.initEvents();\n}\n\nToggler.prototype = {\n\n  getTargets: function() {\n    this.selectors = this.element.getAttribute(\"data-toggle-target\").split(/,\\s?/);\n    this.modifiers = this.element.getAttribute(\"data-toggle-modifier\").split(/,\\s?/);\n    this.targets = [];\n    for(var i=0; i<this.selectors.length; i++) {\n      this.targets.push(document.querySelector(this.selectors[i]));\n      if( !this.modifiers[i] ) {\n        this.modifiers[i] = \"hidden\";\n      }\n    }\n  },\n\n  toggle: function(){\n    for(var i=0; i<this.targets.length; i++) {\n      this.targets[i].classList.toggle(this.modifiers[i])\n    }\n  },\n\n  initEvents: function() {\n    var self = this;\n    this.element.addEventListener(\"click\", function(e){\n      self.toggle();\n      e.preventDefault();\n    })\n  }\n}\n\nvar TogglerManager = {\n\n  togglers: [],\n\n  findByElement: function(element) {\n    for(var i=0; i<this.togglers.length; i++) {\n      if(this.togglers[i].element === element) {\n        return this.togglers[i]\n      }\n    }\n  },\n  \n  init: function() {\n    var elements = document.querySelectorAll(\"*[data-toggle-target]\");\n    for(var i=0; i<elements.length; i++) {\n      this.togglers.push(new Toggler(elements[i]));\n    }\n  }\n} \n\n\nvar ShadowFlow = {\n\n  update: function(element, event) {\n    var position = offsetTop(element);\n    position.left += element.offsetWidth/2;\n    position.top += element.offsetHeight/2;\n\n    var intensity = {\n      left: (position.left - event.clientX) / 150,\n      top: (position.top - event.clientY) / 100 \n    }\n    \n    element.style.textShadow = intensity.left + \"px \" + intensity.top + \"px 10px rgba(0, 0, 0, .5)\" \n  },\n\n  updateAll: function(event){\n    for(var i=0; i<this.elements.length; i++) {\n      this.update(this.elements[i], event)\n    }\n  },\n\n  initEvents: function() {\n    var self = this;\n    window.addEventListener(\"mousemove\", self.updateAll.bind(this))\n  },\n\n  init: function() {\n    this.elements = document.querySelectorAll(\".shadow-flow\");\n    this.initEvents();\n  }\n}\n\nvar BackgroundParalax = {\n\n  update: function(element, event) {\n    var position = offsetTop(element);\n    position.left += element.offsetWidth/2;\n    position.top += element.offsetHeight/2;\n\n    var intensity = {\n      left: (position.left - event.clientX) / 150,\n      top: (position.top - event.clientY) / 100 \n    }\n    \n    element.style.textShadow = intensity.left + \"px \" + intensity.top + \"px 10px rgba(0, 0, 0, .5)\" \n  },\n\n  updateAll: function(event){\n    for(var i=0; i<this.elements.length; i++) {\n      this.update(this.elements[i], event)\n    }\n  },\n\n  initEvent: function(element) {\n    var image = new Image();\n    image.src = element.style.backgroundImage.match(/url\\([\"']?([^\"']*)[\"']?\\)/)[1];\n\n    var ratio = element.offsetWidth / element.offsetHeight;\n    var bgRatio = image.width/image.height;\n\n\n    function ease(t) {\n      return -t * (t - 2.0);\n    }\n\n    window.addEventListener(\"resize\", function() {\n      ratio = element.offsetWidth / element.offsetHeight;\n    })\n\n    element.addEventListener(\"mousemove\", function(e) {\n      var scale = 1.3;\n      var size = ratio > bgRatio ? \"130% auto\" : \"auto 130%\"  \n            \n      var value = {\n        left: (e.clientX - element.offsetWidth/2) / (element.offsetWidth/2),\n        top: (e.clientY + window.scrollTop - element.offsetHeight/2) / (element.offsetHeight/2)\n      }\n      \n\n\n      element.style.backgroundSize = size\n      element.style.backgroundPosition = (50 + ease(value.left)*1) + \"%\" + (50 + ease(value.top)*1) + \"%\";\n    })\n  },\n\n  initEvents: function() {\n    var self = this;\n    for(var i=0; i<this.elements.length; i++) {\n      this.initEvent(this.elements[i]);\n    }\n  },\n\n\n  init: function() {\n    this.elements = document.querySelectorAll(\".paralax\");\n    this.initEvents();\n  }\n}\n\nwindow.addEventListener(\"load\", function(){\n  manageHomeCarousel();\n  TogglerManager.init();\n  BackgroundParalax.init();\n  ShadowFlow.init();\n})"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY29tcG9uZW50cy9jYXJvdXNlbC5qcyIsInNyYy9qcy9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7O0FDQUEsU0FBUyxRQUFULENBQWtCLE9BQWxCLEVBQTJCO0FBQ3pCLE9BQUssT0FBTCxHQUFlLE9BQWY7QUFDQSxPQUFLLFNBQUwsR0FBaUIsS0FBSyxPQUFMLENBQWEsZ0JBQWIsQ0FBOEIsd0JBQTlCLENBQWpCO0FBQ0EsT0FBSyxLQUFMLEdBQWEsS0FBSyxPQUFMLENBQWEsZ0JBQWIsQ0FBOEIsc0JBQTlCLENBQWI7QUFDQSxPQUFLLFFBQUwsR0FBZ0IsQ0FBaEI7QUFDQSxPQUFLLFVBQUw7QUFDRDs7QUFFRCxTQUFTLFNBQVQsR0FBcUI7QUFDbkIsTUFBSSxPQUFKLEdBQWM7QUFDWixRQUFJLEtBQUssUUFBTCxJQUFpQixDQUFyQixFQUF5QjtBQUN2QixhQUFPLEtBQUssUUFBWjtBQUNEO0FBQ0QsU0FBSSxJQUFJLElBQUUsQ0FBVixFQUFhLElBQUUsS0FBSyxTQUFMLENBQWUsTUFBOUIsRUFBc0MsR0FBdEMsRUFBMkM7QUFDekMsVUFBSSxLQUFLLFNBQUwsQ0FBZSxDQUFmLEVBQWtCLFNBQWxCLENBQTRCLFFBQTVCLENBQXFDLCtCQUFyQyxDQUFKLEVBQTRFO0FBQzFFLGVBQU8sQ0FBUDtBQUNEO0FBQ0Y7QUFDRCxTQUFLLE9BQUwsR0FBZSxDQUFmO0FBQ0EsV0FBTyxDQUFQO0FBQ0QsR0Faa0I7O0FBY25CLE1BQUksT0FBSixDQUFZLEtBQVosRUFBbUI7QUFDakIsUUFBSSxVQUFVLEtBQUssT0FBbkIsRUFBNkI7QUFDM0IsV0FBSyxJQUFMLENBQVUsS0FBSyxPQUFmO0FBQ0EsaUJBQVksWUFBVTtBQUNwQixhQUFLLElBQUwsQ0FBVSxLQUFWO0FBQ0QsT0FGVSxDQUVSLElBRlEsQ0FFSCxJQUZHLENBQVgsRUFFZSxHQUZmO0FBR0Q7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IiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiZnVuY3Rpb24gQ2Fyb3VzZWwoZWxlbWVudCkge1xuICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICB0aGlzLmhlYWRJdGVtcyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhcm91c2VsX19oZWFkZXItaXRlbVwiKTtcbiAgdGhpcy5pdGVtcyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhcm91c2VsX19ib2R5LWl0ZW1cIik7IFxuICB0aGlzLl9jdXJyZW50ID0gMDtcbiAgdGhpcy5pbml0RXZlbnRzKCk7XG59XG5cbkNhcm91c2VsLnByb3RvdHlwZSA9IHtcbiAgZ2V0IGN1cnJlbnQoKSB7XG4gICAgaWYoIHRoaXMuX2N1cnJlbnQgPj0gMCApIHtcbiAgICAgIHJldHVybiB0aGlzLl9jdXJyZW50O1xuICAgIH1cbiAgICBmb3IodmFyIGk9MDsgaTx0aGlzLmhlYWRJdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYoIHRoaXMuaGVhZEl0ZW1zW2ldLmNsYXNzTGlzdC5jb250YWlucyhcImNhcm91c2VsX19oZWFkZXItaXRlbS0tYWN0aXZlXCIpICkge1xuICAgICAgICByZXR1cm4gaTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5jdXJyZW50ID0gMDsgXG4gICAgcmV0dXJuIDA7IFxuICB9LFxuXG4gIHNldCBjdXJyZW50KHZhbHVlKSB7XG4gICAgaWYoIHZhbHVlICE9PSB0aGlzLmN1cnJlbnQgKSB7XG4gICAgICB0aGlzLmhpZGUodGhpcy5jdXJyZW50KTtcbiAgICAgIHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7XG4gICAgICAgIHRoaXMuc2hvdyh2YWx1ZSk7XG4gICAgICB9KS5iaW5kKHRoaXMpLCAzNTApXG4gICAgfVxuICAgIHZhciBsYXN0ID0gdGhpcy5fY3VycmVudDsgXG4gICAgdGhpcy5fY3VycmVudCA9IHZhbHVlO1xuICAgIHRoaXMub25DaGFuZ2UuY2FsbCh0aGlzLCB0aGlzLml0ZW1zW3RoaXMuY3VycmVudF0sIHRoaXMuaXRlbXNbbGFzdF0sIHRoaXMuY3VycmVudCk7XG4gIH0sXG5cbiAgZ2V0SGVhZDogZnVuY3Rpb24ocmFuayl7XG4gICAgcmV0dXJuIHRoaXMuaGVhZEl0ZW1zW3JhbmtdO1xuICB9LFxuXG4gIGdldEJvZHk6IGZ1bmN0aW9uKHJhbmspe1xuICAgIHJldHVybiB0aGlzLml0ZW1zW3JhbmtdO1xuICB9LFxuXG4gIGhpZGU6IGZ1bmN0aW9uKHJhbmspIHtcbiAgICB0aGlzLmhlYWRJdGVtc1tyYW5rXS5jbGFzc0xpc3QucmVtb3ZlKFwiY2Fyb3VzZWxfX2hlYWRlci1pdGVtLS1hY3RpdmVcIik7XG4gICAgdGhpcy5pdGVtc1tyYW5rXS5jbGFzc0xpc3QucmVwbGFjZShcImNhcm91c2VsX19ib2R5LWl0ZW0tLXZpc2libGVcIiwgXCJjYXJvdXNlbF9fYm9keS1pdGVtLS1oaWRkaW5nXCIpO1xuICAgIHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7XG4gICAgICB0aGlzLml0ZW1zW3JhbmtdLmNsYXNzTGlzdC5yZXBsYWNlKFwiY2Fyb3VzZWxfX2JvZHktaXRlbS0taGlkZGluZ1wiLCBcImNhcm91c2VsX19ib2R5LWl0ZW0tLWhpZGRlblwiKTtcbiAgICB9KS5iaW5kKHRoaXMpLCAzNTApXG4gIH0sXG5cbiAgc2hvdzogZnVuY3Rpb24ocmFuaykge1xuICAgIHRoaXMuaGVhZEl0ZW1zW3JhbmtdLmNsYXNzTGlzdC5hZGQoXCJjYXJvdXNlbF9faGVhZGVyLWl0ZW0tLWFjdGl2ZVwiKTtcbiAgICB0aGlzLml0ZW1zW3JhbmtdLmNsYXNzTGlzdC5yZXBsYWNlKFwiY2Fyb3VzZWxfX2JvZHktaXRlbS0taGlkZGVuXCIsIFwiY2Fyb3VzZWxfX2JvZHktaXRlbS0taGlkZGluZ1wiKTtcbiAgICB0aGlzLml0ZW1zW3JhbmtdLmNsYXNzTGlzdC5yZXBsYWNlKFwiY2Fyb3VzZWxfX2JvZHktaXRlbS0taGlkZGluZ1wiLCBcImNhcm91c2VsX19ib2R5LWl0ZW0tLXZpc2libGVcIik7XG4gIH0sXG5cbiAgaW5pdEhlYWRFdmVudDogZnVuY3Rpb24oZWxlbWVudCwgcmFuaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKXtcbiAgICAgIHNlbGYuY3VycmVudCA9IHJhbms7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSlcbiAgfSxcblxuICBpbml0RXZlbnRzOiBmdW5jdGlvbigpIHtcbiAgICBmb3IodmFyIGk9MDsgaTx0aGlzLmhlYWRJdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5pbml0SGVhZEV2ZW50KHRoaXMuaGVhZEl0ZW1zW2ldLCBpKTtcbiAgICB9XG4gIH0sXG5cbiAgb25DaGFuZ2U6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5vbkNoYW5nZSA9IGNhbGxiYWNrO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcm91c2VsOyIsImltcG9ydCBDYXJvdXNlbCBmcm9tIFwiLi9jb21wb25lbnRzL2Nhcm91c2VsLmpzXCJcblxudmFyIG9mZnNldFRvcCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICB2YXIgdG9wID0gMCwgbGVmdCA9IDA7XG4gICAgZG8ge1xuICAgICAgICB0b3AgKz0gZWxlbWVudC5vZmZzZXRUb3AgIHx8IDA7XG4gICAgICAgIGxlZnQgKz0gZWxlbWVudC5vZmZzZXRMZWZ0IHx8IDA7XG4gICAgICAgIGVsZW1lbnQgPSBlbGVtZW50Lm9mZnNldFBhcmVudDtcbiAgICB9IHdoaWxlKGVsZW1lbnQpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgdG9wOiB0b3AsXG4gICAgICAgIGxlZnQ6IGxlZnRcbiAgICB9O1xufTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMod2luZG93LCB7XG4gICAgc2Nyb2xsVG9wOiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wKSB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHNjcm9sbFRvcCA9ICgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wKTtcbiAgICAgICAgICAgIHNjcm9sbFRvcCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cblxuXG5cbmZ1bmN0aW9uIFRodW1ibmFpbHMoZWxlbWVudCkge1xuICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICB0aGlzLml0ZW1zID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRodW1ibmFpbFwiKTtcbiAgdGhpcy5fY3VycmVudCA9IG51bGw7XG59XG5cblRodW1ibmFpbHMucHJvdG90eXBlID0ge1xuXG4gIGdldCBjdXJyZW50KCl7XG4gICAgaWYoIHRoaXMuX2N1cnJlbnQgPj0gMCApe1xuICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnQ7XG4gICAgfVxuICAgIHRoaXMuY3VycmVudCA9IDA7IFxuICAgIHJldHVybiAwOyBcbiAgfSxcblxuICBzZXQgY3VycmVudCh2YWx1ZSkge1xuICAgIGlmKCB0aGlzLl9jdXJyZW50ICkge1xuICAgICAgdGhpcy5oaWRlKHRoaXMuY3VycmVudCk7XG4gICAgfSBcblxuICAgIHRoaXMuc2hvdyh2YWx1ZSk7XG4gICAgdGhpcy5fY3VycmVudCA9IHZhbHVlO1xuICB9LFxuXG4gIGhpZGU6IGZ1bmN0aW9uKHJhbmspIHtcbiAgICB0aGlzLml0ZW1zW3JhbmtdLmNsYXNzTGlzdC5yZXBsYWNlKFwidGh1bWJuYWlsLS12aXNpYmxlXCIsIFwidGh1bWJuYWlsLS1oaWRkZW5cIik7XG4gIH0sXG4gXG4gIHNob3c6IGZ1bmN0aW9uKHJhbmspIHtcbiAgICB0aGlzLml0ZW1zW3JhbmtdLmNsYXNzTGlzdC5yZXBsYWNlKFwidGh1bWJuYWlsLS1oaWRkZW5cIiwgXCJ0aHVtYm5haWwtLXZpc2libGVcIik7XG4gIH1cbn1cblxuXG5cbmZ1bmN0aW9uIG1hbmFnZUhvbWVDYXJvdXNlbCgpe1xuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNob21lLWNhcm91c2VsXCIpKSB7XG4gICAgdmFyIHNlY3Rpb25DYXJvdXNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYW5jaG9yLTJcIik7XG5cbiAgICB2YXIgdGh1bWJuYWlscyA9IG5ldyBUaHVtYm5haWxzKHNlY3Rpb25DYXJvdXNlbC5xdWVyeVNlbGVjdG9yKFwiLnRodW1ibmFpbHNcIikpO1xuICAgIHZhciBjYXJvdXNlbCA9IG5ldyBDYXJvdXNlbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2hvbWUtY2Fyb3VzZWxcIikpO1xuICAgIGNhcm91c2VsLm9uQ2hhbmdlID0gZnVuY3Rpb24oY3VycmVudCwgbGFzdCwgcmFuaykge1xuICAgICAgLy9sYXN0LnF1ZXJ5U2VsZWN0b3IoXCIuYnRuLW1vcnBoLWNyb3NzXCIpLmNsaWNrKCk7XG4gICAgICB2YXIgdG9nZ2xlciA9IFRvZ2dsZXJNYW5hZ2VyLmZpbmRCeUVsZW1lbnQobGFzdC5xdWVyeVNlbGVjdG9yKFwiLmJ0bi1tb3JwaC1jcm9zc1wiKSk7XG4gICAgICBpZiggdG9nZ2xlciAmJiB0b2dnbGVyLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYnRuLW1vcnBoLWNyb3NzLS1hY3RpdmVcIikgKSB7XG4gICAgICAgIHRvZ2dsZXIudG9nZ2xlKCk7XG4gICAgICB9XG4gICAgICB0aHVtYm5haWxzLmN1cnJlbnQgPSByYW5rO1xuICAgIH1cbiAgfVxufVxuXG5cbmZ1bmN0aW9uIFRvZ2dsZXIoZWxlbWVudCkge1xuICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICB0aGlzLmdldFRhcmdldHMoKTtcbiAgdGhpcy5pbml0RXZlbnRzKCk7XG59XG5cblRvZ2dsZXIucHJvdG90eXBlID0ge1xuXG4gIGdldFRhcmdldHM6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2VsZWN0b3JzID0gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtdG9nZ2xlLXRhcmdldFwiKS5zcGxpdCgvLFxccz8vKTtcbiAgICB0aGlzLm1vZGlmaWVycyA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXRvZ2dsZS1tb2RpZmllclwiKS5zcGxpdCgvLFxccz8vKTtcbiAgICB0aGlzLnRhcmdldHMgPSBbXTtcbiAgICBmb3IodmFyIGk9MDsgaTx0aGlzLnNlbGVjdG9ycy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy50YXJnZXRzLnB1c2goZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLnNlbGVjdG9yc1tpXSkpO1xuICAgICAgaWYoICF0aGlzLm1vZGlmaWVyc1tpXSApIHtcbiAgICAgICAgdGhpcy5tb2RpZmllcnNbaV0gPSBcImhpZGRlblwiO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICB0b2dnbGU6IGZ1bmN0aW9uKCl7XG4gICAgZm9yKHZhciBpPTA7IGk8dGhpcy50YXJnZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnRhcmdldHNbaV0uY2xhc3NMaXN0LnRvZ2dsZSh0aGlzLm1vZGlmaWVyc1tpXSlcbiAgICB9XG4gIH0sXG5cbiAgaW5pdEV2ZW50czogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSl7XG4gICAgICBzZWxmLnRvZ2dsZSgpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pXG4gIH1cbn1cblxudmFyIFRvZ2dsZXJNYW5hZ2VyID0ge1xuXG4gIHRvZ2dsZXJzOiBbXSxcblxuICBmaW5kQnlFbGVtZW50OiBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgZm9yKHZhciBpPTA7IGk8dGhpcy50b2dnbGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYodGhpcy50b2dnbGVyc1tpXS5lbGVtZW50ID09PSBlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvZ2dsZXJzW2ldXG4gICAgICB9XG4gICAgfVxuICB9LFxuICBcbiAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIipbZGF0YS10b2dnbGUtdGFyZ2V0XVwiKTtcbiAgICBmb3IodmFyIGk9MDsgaTxlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy50b2dnbGVycy5wdXNoKG5ldyBUb2dnbGVyKGVsZW1lbnRzW2ldKSk7XG4gICAgfVxuICB9XG59IFxuXG5cbnZhciBTaGFkb3dGbG93ID0ge1xuXG4gIHVwZGF0ZTogZnVuY3Rpb24oZWxlbWVudCwgZXZlbnQpIHtcbiAgICB2YXIgcG9zaXRpb24gPSBvZmZzZXRUb3AoZWxlbWVudCk7XG4gICAgcG9zaXRpb24ubGVmdCArPSBlbGVtZW50Lm9mZnNldFdpZHRoLzI7XG4gICAgcG9zaXRpb24udG9wICs9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0LzI7XG5cbiAgICB2YXIgaW50ZW5zaXR5ID0ge1xuICAgICAgbGVmdDogKHBvc2l0aW9uLmxlZnQgLSBldmVudC5jbGllbnRYKSAvIDE1MCxcbiAgICAgIHRvcDogKHBvc2l0aW9uLnRvcCAtIGV2ZW50LmNsaWVudFkpIC8gMTAwIFxuICAgIH1cbiAgICBcbiAgICBlbGVtZW50LnN0eWxlLnRleHRTaGFkb3cgPSBpbnRlbnNpdHkubGVmdCArIFwicHggXCIgKyBpbnRlbnNpdHkudG9wICsgXCJweCAxMHB4IHJnYmEoMCwgMCwgMCwgLjUpXCIgXG4gIH0sXG5cbiAgdXBkYXRlQWxsOiBmdW5jdGlvbihldmVudCl7XG4gICAgZm9yKHZhciBpPTA7IGk8dGhpcy5lbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy51cGRhdGUodGhpcy5lbGVtZW50c1tpXSwgZXZlbnQpXG4gICAgfVxuICB9LFxuXG4gIGluaXRFdmVudHM6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBzZWxmLnVwZGF0ZUFsbC5iaW5kKHRoaXMpKVxuICB9LFxuXG4gIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNoYWRvdy1mbG93XCIpO1xuICAgIHRoaXMuaW5pdEV2ZW50cygpO1xuICB9XG59XG5cbnZhciBCYWNrZ3JvdW5kUGFyYWxheCA9IHtcblxuICB1cGRhdGU6IGZ1bmN0aW9uKGVsZW1lbnQsIGV2ZW50KSB7XG4gICAgdmFyIHBvc2l0aW9uID0gb2Zmc2V0VG9wKGVsZW1lbnQpO1xuICAgIHBvc2l0aW9uLmxlZnQgKz0gZWxlbWVudC5vZmZzZXRXaWR0aC8yO1xuICAgIHBvc2l0aW9uLnRvcCArPSBlbGVtZW50Lm9mZnNldEhlaWdodC8yO1xuXG4gICAgdmFyIGludGVuc2l0eSA9IHtcbiAgICAgIGxlZnQ6IChwb3NpdGlvbi5sZWZ0IC0gZXZlbnQuY2xpZW50WCkgLyAxNTAsXG4gICAgICB0b3A6IChwb3NpdGlvbi50b3AgLSBldmVudC5jbGllbnRZKSAvIDEwMCBcbiAgICB9XG4gICAgXG4gICAgZWxlbWVudC5zdHlsZS50ZXh0U2hhZG93ID0gaW50ZW5zaXR5LmxlZnQgKyBcInB4IFwiICsgaW50ZW5zaXR5LnRvcCArIFwicHggMTBweCByZ2JhKDAsIDAsIDAsIC41KVwiIFxuICB9LFxuXG4gIHVwZGF0ZUFsbDogZnVuY3Rpb24oZXZlbnQpe1xuICAgIGZvcih2YXIgaT0wOyBpPHRoaXMuZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMudXBkYXRlKHRoaXMuZWxlbWVudHNbaV0sIGV2ZW50KVxuICAgIH1cbiAgfSxcblxuICBpbml0RXZlbnQ6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICB2YXIgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICBpbWFnZS5zcmMgPSBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZS5tYXRjaCgvdXJsXFwoW1wiJ10/KFteXCInXSopW1wiJ10/XFwpLylbMV07XG5cbiAgICB2YXIgcmF0aW8gPSBlbGVtZW50Lm9mZnNldFdpZHRoIC8gZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgdmFyIGJnUmF0aW8gPSBpbWFnZS53aWR0aC9pbWFnZS5oZWlnaHQ7XG5cblxuICAgIGZ1bmN0aW9uIGVhc2UodCkge1xuICAgICAgcmV0dXJuIC10ICogKHQgLSAyLjApO1xuICAgIH1cblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgcmF0aW8gPSBlbGVtZW50Lm9mZnNldFdpZHRoIC8gZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgfSlcblxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgc2NhbGUgPSAxLjM7XG4gICAgICB2YXIgc2l6ZSA9IHJhdGlvID4gYmdSYXRpbyA/IFwiMTMwJSBhdXRvXCIgOiBcImF1dG8gMTMwJVwiICBcbiAgICAgICAgICAgIFxuICAgICAgdmFyIHZhbHVlID0ge1xuICAgICAgICBsZWZ0OiAoZS5jbGllbnRYIC0gZWxlbWVudC5vZmZzZXRXaWR0aC8yKSAvIChlbGVtZW50Lm9mZnNldFdpZHRoLzIpLFxuICAgICAgICB0b3A6IChlLmNsaWVudFkgKyB3aW5kb3cuc2Nyb2xsVG9wIC0gZWxlbWVudC5vZmZzZXRIZWlnaHQvMikgLyAoZWxlbWVudC5vZmZzZXRIZWlnaHQvMilcbiAgICAgIH1cbiAgICAgIFxuXG5cbiAgICAgIGVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZFNpemUgPSBzaXplXG4gICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9ICg1MCArIGVhc2UodmFsdWUubGVmdCkqMSkgKyBcIiVcIiArICg1MCArIGVhc2UodmFsdWUudG9wKSoxKSArIFwiJVwiO1xuICAgIH0pXG4gIH0sXG5cbiAgaW5pdEV2ZW50czogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGZvcih2YXIgaT0wOyBpPHRoaXMuZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuaW5pdEV2ZW50KHRoaXMuZWxlbWVudHNbaV0pO1xuICAgIH1cbiAgfSxcblxuXG4gIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBhcmFsYXhcIik7XG4gICAgdGhpcy5pbml0RXZlbnRzKCk7XG4gIH1cbn1cblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uKCl7XG4gIG1hbmFnZUhvbWVDYXJvdXNlbCgpO1xuICBUb2dnbGVyTWFuYWdlci5pbml0KCk7XG4gIEJhY2tncm91bmRQYXJhbGF4LmluaXQoKTtcbiAgU2hhZG93Rmxvdy5pbml0KCk7XG59KSJdfQ=="}