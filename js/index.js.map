{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/components/backgroundParalax.js","src/js/components/carousel.js","src/js/components/shadowFlow.js","src/js/components/thumbnails.js","src/js/components/toggler.js","src/js/index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","\nvar BackgroundParalax = {\n\n  update: function(element, event) {\n    var position = offsetTop(element);\n    position.left += element.offsetWidth/2;\n    position.top += element.offsetHeight/2;\n\n    var intensity = {\n      left: (position.left - event.clientX) / 150,\n      top: (position.top - event.clientY) / 100 \n    }\n    \n    element.style.textShadow = intensity.left + \"px \" + intensity.top + \"px 10px rgba(0, 0, 0, .5)\" \n  },\n\n  updateAll: function(event){\n    for(var i=0; i<this.elements.length; i++) {\n      this.update(this.elements[i], event)\n    }\n  },\n\n  initEvent: function(element) {\n    var image = new Image();\n    image.src = element.style.backgroundImage.match(/url\\([\"']?([^\"']*)[\"']?\\)/)[1];\n\n    var ratio = element.offsetWidth / element.offsetHeight;\n    var bgRatio = image.width/image.height;\n\n\n    function ease(t) {\n      return -t * (t - 2.0);\n    }\n\n    window.addEventListener(\"resize\", function() {\n      ratio = element.offsetWidth / element.offsetHeight;\n    })\n\n    element.addEventListener(\"mousemove\", function(e) {\n      var scale = 1.3;\n      var size = ratio > bgRatio ? \"130% auto\" : \"auto 130%\"  \n            \n      var value = {\n        left: (e.clientX - element.offsetWidth/2) / (element.offsetWidth/2),\n        top: (e.clientY + window.scrollTop - element.offsetHeight/2) / (element.offsetHeight/2)\n      }\n      \n\n\n      element.style.backgroundSize = size\n      element.style.backgroundPosition = (50 + ease(value.left)*1) + \"%\" + (50 + ease(value.top)*1) + \"%\";\n    })\n  },\n\n  initEvents: function() {\n    var self = this;\n    for(var i=0; i<this.elements.length; i++) {\n      this.initEvent(this.elements[i]);\n    }\n  },\n\n\n  init: function() {\n    this.elements = document.querySelectorAll(\".paralax\");\n    this.initEvents();\n  }\n}\n\nexport default BackgroundParalax;","function Carousel(element) {\n  this.element = element;\n  this.headItems = this.element.querySelectorAll(\".carousel__header-item\");\n  this.items = this.element.querySelectorAll(\".carousel__body-item\"); \n  this._current = 0;\n  this.initEvents();\n}\n\nCarousel.prototype = {\n  get current() {\n    if( this._current >= 0 ) {\n      return this._current;\n    }\n    for(var i=0; i<this.headItems.length; i++) {\n      if( this.headItems[i].classList.contains(\"carousel__header-item--active\") ) {\n        return i;\n      }\n    }\n    this.current = 0; \n    return 0; \n  },\n\n  set current(value) {\n    if( value !== this.current ) {\n      this.hide(this.current);\n      setTimeout((function(){\n        this.show(value);\n      }).bind(this), 350)\n    }\n    var last = this._current; \n    this._current = value;\n    this.onChange.call(this, this.items[this.current], this.items[last], this.current);\n  },\n\n  getHead: function(rank){\n    return this.headItems[rank];\n  },\n\n  getBody: function(rank){\n    return this.items[rank];\n  },\n\n  hide: function(rank) {\n    this.headItems[rank].classList.remove(\"carousel__header-item--active\");\n    this.items[rank].classList.replace(\"carousel__body-item--visible\", \"carousel__body-item--hidding\");\n    setTimeout((function(){\n      this.items[rank].classList.replace(\"carousel__body-item--hidding\", \"carousel__body-item--hidden\");\n    }).bind(this), 350)\n  },\n\n  show: function(rank) {\n    this.headItems[rank].classList.add(\"carousel__header-item--active\");\n    this.items[rank].classList.replace(\"carousel__body-item--hidden\", \"carousel__body-item--hidding\");\n    this.items[rank].classList.replace(\"carousel__body-item--hidding\", \"carousel__body-item--visible\");\n  },\n\n  initHeadEvent: function(element, rank) {\n    var self = this;\n    element.addEventListener(\"click\", function(e){\n      self.current = rank;\n      e.preventDefault();\n    })\n  },\n\n  initEvents: function() {\n    for(var i=0; i<this.headItems.length; i++) {\n      this.initHeadEvent(this.headItems[i], i);\n    }\n  },\n\n  onChange: function(callback) {\n    this.onChange = callback;\n  }\n}\n\nexport default Carousel;","var ShadowFlow = {\n\n  update: function(element, event) {\n    var position = offsetTop(element);\n    position.left += element.offsetWidth/2;\n    position.top += element.offsetHeight/2;\n\n    var intensity = {\n      left: (position.left - event.clientX) / 150,\n      top: (position.top - event.clientY) / 100 \n    }\n    \n    element.style.textShadow = intensity.left + \"px \" + intensity.top + \"px 10px rgba(0, 0, 0, .5)\" \n  },\n\n  updateAll: function(event){\n    for(var i=0; i<this.elements.length; i++) {\n      this.update(this.elements[i], event)\n    }\n  },\n\n  initEvents: function() {\n    var self = this;\n    window.addEventListener(\"mousemove\", self.updateAll.bind(this))\n  },\n\n  init: function() {\n    this.elements = document.querySelectorAll(\".shadow-flow\");\n    this.initEvents();\n  }\n}\n\n\n\nexport default ShadowFlow;","function Thumbnails(element) {\n  this.element = element;\n  this.items = element.querySelectorAll(\".thumbnail\");\n  this._current = null;\n}\n\nThumbnails.prototype = {\n\n  get current(){\n    if( this._current >= 0 ){\n      return this._current;\n    }\n    this.current = 0; \n    return 0; \n  },\n\n  set current(value) {\n    if( this._current ) {\n      this.hide(this.current);\n    } \n\n    this.show(value);\n    this._current = value;\n  },\n\n  hide: function(rank) {\n    this.items[rank].classList.replace(\"thumbnail--visible\", \"thumbnail--hidden\");\n  },\n \n  show: function(rank) {\n    this.items[rank].classList.replace(\"thumbnail--hidden\", \"thumbnail--visible\");\n  }\n}\n\n\nexport default Thumbnails;","function Toggler(element) {\n  this.element = element;\n  this.getTargets();\n  this.initEvents();\n}\n\nToggler.prototype = {\n\n  getTargets: function() {\n    this.selectors = this.element.getAttribute(\"data-toggle-target\").split(/,\\s?/);\n    this.modifiers = this.element.getAttribute(\"data-toggle-modifier\").split(/,\\s?/);\n    this.targets = [];\n    for(var i=0; i<this.selectors.length; i++) {\n      this.targets.push(document.querySelector(this.selectors[i]));\n      if( !this.modifiers[i] ) {\n        this.modifiers[i] = \"hidden\";\n      }\n    }\n  },\n\n  toggle: function(){\n    for(var i=0; i<this.targets.length; i++) {\n      this.targets[i].classList.toggle(this.modifiers[i])\n    }\n  },\n\n  initEvents: function() {\n    var self = this;\n    this.element.addEventListener(\"click\", function(e){\n      self.toggle();\n      e.preventDefault();\n    })\n  }\n}\n\nvar TogglerManager = {\n\n  togglers: [],\n\n  findByElement: function(element) {\n    for(var i=0; i<this.togglers.length; i++) {\n      if(this.togglers[i].element === element) {\n        return this.togglers[i]\n      }\n    }\n  },\n  \n  init: function() {\n    var elements = document.querySelectorAll(\"*[data-toggle-target]\");\n    for(var i=0; i<elements.length; i++) {\n      this.togglers.push(new Toggler(elements[i]));\n    }\n  }\n}\n\nexport {Toggler};\n\nexport default TogglerManager;","import Carousel from \"./components/carousel.js\";\nimport Thumbnails from \"./components/thumbnails.js\";\nimport TogglerManager from \"./components/toggler.js\";\nimport {Toggler} from \"./components/toggler.js\";\nimport BackgroundParalax from \"./components/backgroundParalax.js\";\nimport ShadowFlow from \"./components/shadowFlow.js\";\n\nvar offsetTop = function(element) {\n    var top = 0, left = 0;\n    do {\n        top += element.offsetTop  || 0;\n        left += element.offsetLeft || 0;\n        element = element.offsetParent;\n    } while(element);\n\n    return {\n        top: top,\n        left: left\n    };\n};\n\nObject.defineProperties(window, {\n    scrollTop: {\n        get: function() {\n            return (document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop;\n        },\n        set: function(value) {\n            var scrollTop = ((document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop);\n            scrollTop = value;\n        }\n    }\n});\n\nfunction manageHomeCarousel(){\n  if (document.querySelector(\"#home-carousel\")) {\n    var sectionCarousel = document.querySelector(\"#anchor-2\");\n\n    var thumbnails = new Thumbnails(sectionCarousel.querySelector(\".thumbnails\"));\n    var carousel = new Carousel(document.querySelector(\"#home-carousel\"));\n    carousel.onChange = function(current, last, rank) {\n      //last.querySelector(\".btn-morph-cross\").click();\n      var toggler = TogglerManager.findByElement(last.querySelector(\".btn-morph-cross\"));\n      if( toggler && toggler.element.classList.contains(\"btn-morph-cross--active\") ) {\n        toggler.toggle();\n      }\n      thumbnails.current = rank;\n    }\n  }\n}\n\n\nwindow.addEventListener(\"load\", function(){\n  manageHomeCarousel();\n  TogglerManager.init();\n  BackgroundParalax.init();\n  ShadowFlow.init();\n})"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY29tcG9uZW50cy9iYWNrZ3JvdW5kUGFyYWxheC5qcyIsInNyYy9qcy9jb21wb25lbnRzL2Nhcm91c2VsLmpzIiwic3JjL2pzL2NvbXBvbmVudHMvc2hhZG93Rmxvdy5qcyIsInNyYy9qcy9jb21wb25lbnRzL3RodW1ibmFpbHMuanMiLCJzcmMvanMvY29tcG9uZW50cy90b2dnbGVyLmpzIiwic3JjL2pzL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7O0FDQ0EsSUFBSSxvQkFBb0I7O0FBRXRCLFVBQVEsZ0JBQVMsT0FBVCxFQUFrQixLQUFsQixFQUF5QjtBQUMvQixRQUFJLFdBQVcsVUFBVSxPQUFWLENBQWY7QUFDQSxhQUFTLElBQVQsSUFBaUIsUUFBUSxXQUFSLEdBQW9CLENBQXJDO0FBQ0EsYUFBUyxHQUFULElBQWdCLFFBQVEsWUFBUixHQUFxQixDQUFyQzs7QUFFQSxRQUFJLFlBQVk7QUFDZCxZQUFNLENBQUMsU0FBUyxJQUFULEdBQWdCLE1BQU0sT0FBdkIsSUFBa0MsR0FEMUI7QUFFZCxXQUFLLENBQUMsU0FBUyxHQUFULEdBQWUsTUFBTSxPQUF0QixJQUFpQztBQUZ4QixLQUFoQjs7QUFLQSxZQUFRLEtBQVIsQ0FBYyxVQUFkLEdBQTJCLFVBQVUsSUFBVixHQUFpQixLQUFqQixHQUF5QixVQUFVLEdBQW5DLEdBQXlDLDJCQUFwRTtBQUNELEdBYnFCOztBQWV0QixhQUFXLG1CQUFTLEtBQVQsRUFBZTtBQUN4QixTQUFJLElBQUksSUFBRSxDQUFWLEVBQWEsSUFBRSxLQUFLLFFBQUwsQ0FBYyxNQUE3QixFQUFxQyxHQUFyQyxFQUEwQztBQUN4QyxXQUFLLE1BQUwsQ0FBWSxLQUFLLFFBQUwsQ0FBYyxDQUFkLENBQVosRUFBOEIsS0FBOUI7QUFDRDtBQUNGLEdBbkJxQjs7QUFxQnRCLGFBQVcsbUJBQVMsT0FBVCxFQUFrQjtBQUMz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QixDQUE3QixDQUFkO0FBQ0EsZ0JBQUksV0FBVyxRQUFRLE9BQVIsQ0FBZ0IsU0FBaEIsQ0FBMEIsUUFBMUIsQ0FBbUMseUJBQW5DLENBQWYsRUFBK0U7QUFDN0Usd0JBQVEsTUFBUjtBQUNEO0FBQ0QsdUJBQVcsT0FBWCxHQUFxQixJQUFyQjtBQUNELFNBUEQ7QUFRRDtBQUNGOztBQUdELE9BQU8sZ0JBQVAsQ0FBd0IsTUFBeEIsRUFBZ0MsWUFBVTtBQUN4QztBQUNBLHNCQUFlLElBQWY7QUFDQSxnQ0FBa0IsSUFBbEI7QUFDQSx5QkFBVyxJQUFYO0FBQ0QsQ0FMRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIlxudmFyIEJhY2tncm91bmRQYXJhbGF4ID0ge1xuXG4gIHVwZGF0ZTogZnVuY3Rpb24oZWxlbWVudCwgZXZlbnQpIHtcbiAgICB2YXIgcG9zaXRpb24gPSBvZmZzZXRUb3AoZWxlbWVudCk7XG4gICAgcG9zaXRpb24ubGVmdCArPSBlbGVtZW50Lm9mZnNldFdpZHRoLzI7XG4gICAgcG9zaXRpb24udG9wICs9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0LzI7XG5cbiAgICB2YXIgaW50ZW5zaXR5ID0ge1xuICAgICAgbGVmdDogKHBvc2l0aW9uLmxlZnQgLSBldmVudC5jbGllbnRYKSAvIDE1MCxcbiAgICAgIHRvcDogKHBvc2l0aW9uLnRvcCAtIGV2ZW50LmNsaWVudFkpIC8gMTAwIFxuICAgIH1cbiAgICBcbiAgICBlbGVtZW50LnN0eWxlLnRleHRTaGFkb3cgPSBpbnRlbnNpdHkubGVmdCArIFwicHggXCIgKyBpbnRlbnNpdHkudG9wICsgXCJweCAxMHB4IHJnYmEoMCwgMCwgMCwgLjUpXCIgXG4gIH0sXG5cbiAgdXBkYXRlQWxsOiBmdW5jdGlvbihldmVudCl7XG4gICAgZm9yKHZhciBpPTA7IGk8dGhpcy5lbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy51cGRhdGUodGhpcy5lbGVtZW50c1tpXSwgZXZlbnQpXG4gICAgfVxuICB9LFxuXG4gIGluaXRFdmVudDogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIHZhciBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgIGltYWdlLnNyYyA9IGVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZEltYWdlLm1hdGNoKC91cmxcXChbXCInXT8oW15cIiddKilbXCInXT9cXCkvKVsxXTtcblxuICAgIHZhciByYXRpbyA9IGVsZW1lbnQub2Zmc2V0V2lkdGggLyBlbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICB2YXIgYmdSYXRpbyA9IGltYWdlLndpZHRoL2ltYWdlLmhlaWdodDtcblxuXG4gICAgZnVuY3Rpb24gZWFzZSh0KSB7XG4gICAgICByZXR1cm4gLXQgKiAodCAtIDIuMCk7XG4gICAgfVxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICByYXRpbyA9IGVsZW1lbnQub2Zmc2V0V2lkdGggLyBlbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICB9KVxuXG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBzY2FsZSA9IDEuMztcbiAgICAgIHZhciBzaXplID0gcmF0aW8gPiBiZ1JhdGlvID8gXCIxMzAlIGF1dG9cIiA6IFwiYXV0byAxMzAlXCIgIFxuICAgICAgICAgICAgXG4gICAgICB2YXIgdmFsdWUgPSB7XG4gICAgICAgIGxlZnQ6IChlLmNsaWVudFggLSBlbGVtZW50Lm9mZnNldFdpZHRoLzIpIC8gKGVsZW1lbnQub2Zmc2V0V2lkdGgvMiksXG4gICAgICAgIHRvcDogKGUuY2xpZW50WSArIHdpbmRvdy5zY3JvbGxUb3AgLSBlbGVtZW50Lm9mZnNldEhlaWdodC8yKSAvIChlbGVtZW50Lm9mZnNldEhlaWdodC8yKVxuICAgICAgfVxuICAgICAgXG5cblxuICAgICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kU2l6ZSA9IHNpemVcbiAgICAgIGVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uID0gKDUwICsgZWFzZSh2YWx1ZS5sZWZ0KSoxKSArIFwiJVwiICsgKDUwICsgZWFzZSh2YWx1ZS50b3ApKjEpICsgXCIlXCI7XG4gICAgfSlcbiAgfSxcblxuICBpbml0RXZlbnRzOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgZm9yKHZhciBpPTA7IGk8dGhpcy5lbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5pbml0RXZlbnQodGhpcy5lbGVtZW50c1tpXSk7XG4gICAgfVxuICB9LFxuXG5cbiAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5lbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucGFyYWxheFwiKTtcbiAgICB0aGlzLmluaXRFdmVudHMoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCYWNrZ3JvdW5kUGFyYWxheDsiLCJmdW5jdGlvbiBDYXJvdXNlbChlbGVtZW50KSB7XG4gIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gIHRoaXMuaGVhZEl0ZW1zID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2Fyb3VzZWxfX2hlYWRlci1pdGVtXCIpO1xuICB0aGlzLml0ZW1zID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2Fyb3VzZWxfX2JvZHktaXRlbVwiKTsgXG4gIHRoaXMuX2N1cnJlbnQgPSAwO1xuICB0aGlzLmluaXRFdmVudHMoKTtcbn1cblxuQ2Fyb3VzZWwucHJvdG90eXBlID0ge1xuICBnZXQgY3VycmVudCgpIHtcbiAgICBpZiggdGhpcy5fY3VycmVudCA+PSAwICkge1xuICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnQ7XG4gICAgfVxuICAgIGZvcih2YXIgaT0wOyBpPHRoaXMuaGVhZEl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiggdGhpcy5oZWFkSXRlbXNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2Fyb3VzZWxfX2hlYWRlci1pdGVtLS1hY3RpdmVcIikgKSB7XG4gICAgICAgIHJldHVybiBpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmN1cnJlbnQgPSAwOyBcbiAgICByZXR1cm4gMDsgXG4gIH0sXG5cbiAgc2V0IGN1cnJlbnQodmFsdWUpIHtcbiAgICBpZiggdmFsdWUgIT09IHRoaXMuY3VycmVudCApIHtcbiAgICAgIHRoaXMuaGlkZSh0aGlzLmN1cnJlbnQpO1xuICAgICAgc2V0VGltZW91dCgoZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy5zaG93KHZhbHVlKTtcbiAgICAgIH0pLmJpbmQodGhpcyksIDM1MClcbiAgICB9XG4gICAgdmFyIGxhc3QgPSB0aGlzLl9jdXJyZW50OyBcbiAgICB0aGlzLl9jdXJyZW50ID0gdmFsdWU7XG4gICAgdGhpcy5vbkNoYW5nZS5jYWxsKHRoaXMsIHRoaXMuaXRlbXNbdGhpcy5jdXJyZW50XSwgdGhpcy5pdGVtc1tsYXN0XSwgdGhpcy5jdXJyZW50KTtcbiAgfSxcblxuICBnZXRIZWFkOiBmdW5jdGlvbihyYW5rKXtcbiAgICByZXR1cm4gdGhpcy5oZWFkSXRlbXNbcmFua107XG4gIH0sXG5cbiAgZ2V0Qm9keTogZnVuY3Rpb24ocmFuayl7XG4gICAgcmV0dXJuIHRoaXMuaXRlbXNbcmFua107XG4gIH0sXG5cbiAgaGlkZTogZnVuY3Rpb24ocmFuaykge1xuICAgIHRoaXMuaGVhZEl0ZW1zW3JhbmtdLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJvdXNlbF9faGVhZGVyLWl0ZW0tLWFjdGl2ZVwiKTtcbiAgICB0aGlzLml0ZW1zW3JhbmtdLmNsYXNzTGlzdC5yZXBsYWNlKFwiY2Fyb3VzZWxfX2JvZHktaXRlbS0tdmlzaWJsZVwiLCBcImNhcm91c2VsX19ib2R5LWl0ZW0tLWhpZGRpbmdcIik7XG4gICAgc2V0VGltZW91dCgoZnVuY3Rpb24oKXtcbiAgICAgIHRoaXMuaXRlbXNbcmFua10uY2xhc3NMaXN0LnJlcGxhY2UoXCJjYXJvdXNlbF9fYm9keS1pdGVtLS1oaWRkaW5nXCIsIFwiY2Fyb3VzZWxfX2JvZHktaXRlbS0taGlkZGVuXCIpO1xuICAgIH0pLmJpbmQodGhpcyksIDM1MClcbiAgfSxcblxuICBzaG93OiBmdW5jdGlvbihyYW5rKSB7XG4gICAgdGhpcy5oZWFkSXRlbXNbcmFua10uY2xhc3NMaXN0LmFkZChcImNhcm91c2VsX19oZWFkZXItaXRlbS0tYWN0aXZlXCIpO1xuICAgIHRoaXMuaXRlbXNbcmFua10uY2xhc3NMaXN0LnJlcGxhY2UoXCJjYXJvdXNlbF9fYm9keS1pdGVtLS1oaWRkZW5cIiwgXCJjYXJvdXNlbF9fYm9keS1pdGVtLS1oaWRkaW5nXCIpO1xuICAgIHRoaXMuaXRlbXNbcmFua10uY2xhc3NMaXN0LnJlcGxhY2UoXCJjYXJvdXNlbF9fYm9keS1pdGVtLS1oaWRkaW5nXCIsIFwiY2Fyb3VzZWxfX2JvZHktaXRlbS0tdmlzaWJsZVwiKTtcbiAgfSxcblxuICBpbml0SGVhZEV2ZW50OiBmdW5jdGlvbihlbGVtZW50LCByYW5rKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpe1xuICAgICAgc2VsZi5jdXJyZW50ID0gcmFuaztcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KVxuICB9LFxuXG4gIGluaXRFdmVudHM6IGZ1bmN0aW9uKCkge1xuICAgIGZvcih2YXIgaT0wOyBpPHRoaXMuaGVhZEl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLmluaXRIZWFkRXZlbnQodGhpcy5oZWFkSXRlbXNbaV0sIGkpO1xuICAgIH1cbiAgfSxcblxuICBvbkNoYW5nZTogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICB0aGlzLm9uQ2hhbmdlID0gY2FsbGJhY2s7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2Fyb3VzZWw7IiwidmFyIFNoYWRvd0Zsb3cgPSB7XG5cbiAgdXBkYXRlOiBmdW5jdGlvbihlbGVtZW50LCBldmVudCkge1xuICAgIHZhciBwb3NpdGlvbiA9IG9mZnNldFRvcChlbGVtZW50KTtcbiAgICBwb3NpdGlvbi5sZWZ0ICs9IGVsZW1lbnQub2Zmc2V0V2lkdGgvMjtcbiAgICBwb3NpdGlvbi50b3AgKz0gZWxlbWVudC5vZmZzZXRIZWlnaHQvMjtcblxuICAgIHZhciBpbnRlbnNpdHkgPSB7XG4gICAgICBsZWZ0OiAocG9zaXRpb24ubGVmdCAtIGV2ZW50LmNsaWVudFgpIC8gMTUwLFxuICAgICAgdG9wOiAocG9zaXRpb24udG9wIC0gZXZlbnQuY2xpZW50WSkgLyAxMDAgXG4gICAgfVxuICAgIFxuICAgIGVsZW1lbnQuc3R5bGUudGV4dFNoYWRvdyA9IGludGVuc2l0eS5sZWZ0ICsgXCJweCBcIiArIGludGVuc2l0eS50b3AgKyBcInB4IDEwcHggcmdiYSgwLCAwLCAwLCAuNSlcIiBcbiAgfSxcblxuICB1cGRhdGVBbGw6IGZ1bmN0aW9uKGV2ZW50KXtcbiAgICBmb3IodmFyIGk9MDsgaTx0aGlzLmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnVwZGF0ZSh0aGlzLmVsZW1lbnRzW2ldLCBldmVudClcbiAgICB9XG4gIH0sXG5cbiAgaW5pdEV2ZW50czogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHNlbGYudXBkYXRlQWxsLmJpbmQodGhpcykpXG4gIH0sXG5cbiAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5lbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2hhZG93LWZsb3dcIik7XG4gICAgdGhpcy5pbml0RXZlbnRzKCk7XG4gIH1cbn1cblxuXG5cbmV4cG9ydCBkZWZhdWx0IFNoYWRvd0Zsb3c7IiwiZnVuY3Rpb24gVGh1bWJuYWlscyhlbGVtZW50KSB7XG4gIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gIHRoaXMuaXRlbXMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGh1bWJuYWlsXCIpO1xuICB0aGlzLl9jdXJyZW50ID0gbnVsbDtcbn1cblxuVGh1bWJuYWlscy5wcm90b3R5cGUgPSB7XG5cbiAgZ2V0IGN1cnJlbnQoKXtcbiAgICBpZiggdGhpcy5fY3VycmVudCA+PSAwICl7XG4gICAgICByZXR1cm4gdGhpcy5fY3VycmVudDtcbiAgICB9XG4gICAgdGhpcy5jdXJyZW50ID0gMDsgXG4gICAgcmV0dXJuIDA7IFxuICB9LFxuXG4gIHNldCBjdXJyZW50KHZhbHVlKSB7XG4gICAgaWYoIHRoaXMuX2N1cnJlbnQgKSB7XG4gICAgICB0aGlzLmhpZGUodGhpcy5jdXJyZW50KTtcbiAgICB9IFxuXG4gICAgdGhpcy5zaG93KHZhbHVlKTtcbiAgICB0aGlzLl9jdXJyZW50ID0gdmFsdWU7XG4gIH0sXG5cbiAgaGlkZTogZnVuY3Rpb24ocmFuaykge1xuICAgIHRoaXMuaXRlbXNbcmFua10uY2xhc3NMaXN0LnJlcGxhY2UoXCJ0aHVtYm5haWwtLXZpc2libGVcIiwgXCJ0aHVtYm5haWwtLWhpZGRlblwiKTtcbiAgfSxcbiBcbiAgc2hvdzogZnVuY3Rpb24ocmFuaykge1xuICAgIHRoaXMuaXRlbXNbcmFua10uY2xhc3NMaXN0LnJlcGxhY2UoXCJ0aHVtYm5haWwtLWhpZGRlblwiLCBcInRodW1ibmFpbC0tdmlzaWJsZVwiKTtcbiAgfVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IFRodW1ibmFpbHM7IiwiZnVuY3Rpb24gVG9nZ2xlcihlbGVtZW50KSB7XG4gIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gIHRoaXMuZ2V0VGFyZ2V0cygpO1xuICB0aGlzLmluaXRFdmVudHMoKTtcbn1cblxuVG9nZ2xlci5wcm90b3R5cGUgPSB7XG5cbiAgZ2V0VGFyZ2V0czogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZWxlY3RvcnMgPSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS10b2dnbGUtdGFyZ2V0XCIpLnNwbGl0KC8sXFxzPy8pO1xuICAgIHRoaXMubW9kaWZpZXJzID0gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtdG9nZ2xlLW1vZGlmaWVyXCIpLnNwbGl0KC8sXFxzPy8pO1xuICAgIHRoaXMudGFyZ2V0cyA9IFtdO1xuICAgIGZvcih2YXIgaT0wOyBpPHRoaXMuc2VsZWN0b3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnRhcmdldHMucHVzaChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuc2VsZWN0b3JzW2ldKSk7XG4gICAgICBpZiggIXRoaXMubW9kaWZpZXJzW2ldICkge1xuICAgICAgICB0aGlzLm1vZGlmaWVyc1tpXSA9IFwiaGlkZGVuXCI7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHRvZ2dsZTogZnVuY3Rpb24oKXtcbiAgICBmb3IodmFyIGk9MDsgaTx0aGlzLnRhcmdldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMudGFyZ2V0c1tpXS5jbGFzc0xpc3QudG9nZ2xlKHRoaXMubW9kaWZpZXJzW2ldKVxuICAgIH1cbiAgfSxcblxuICBpbml0RXZlbnRzOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKXtcbiAgICAgIHNlbGYudG9nZ2xlKCk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSlcbiAgfVxufVxuXG52YXIgVG9nZ2xlck1hbmFnZXIgPSB7XG5cbiAgdG9nZ2xlcnM6IFtdLFxuXG4gIGZpbmRCeUVsZW1lbnQ6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICBmb3IodmFyIGk9MDsgaTx0aGlzLnRvZ2dsZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZih0aGlzLnRvZ2dsZXJzW2ldLmVsZW1lbnQgPT09IGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9nZ2xlcnNbaV1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIFxuICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiKltkYXRhLXRvZ2dsZS10YXJnZXRdXCIpO1xuICAgIGZvcih2YXIgaT0wOyBpPGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnRvZ2dsZXJzLnB1c2gobmV3IFRvZ2dsZXIoZWxlbWVudHNbaV0pKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHtUb2dnbGVyfTtcblxuZXhwb3J0IGRlZmF1bHQgVG9nZ2xlck1hbmFnZXI7IiwiaW1wb3J0IENhcm91c2VsIGZyb20gXCIuL2NvbXBvbmVudHMvY2Fyb3VzZWwuanNcIjtcbmltcG9ydCBUaHVtYm5haWxzIGZyb20gXCIuL2NvbXBvbmVudHMvdGh1bWJuYWlscy5qc1wiO1xuaW1wb3J0IFRvZ2dsZXJNYW5hZ2VyIGZyb20gXCIuL2NvbXBvbmVudHMvdG9nZ2xlci5qc1wiO1xuaW1wb3J0IHtUb2dnbGVyfSBmcm9tIFwiLi9jb21wb25lbnRzL3RvZ2dsZXIuanNcIjtcbmltcG9ydCBCYWNrZ3JvdW5kUGFyYWxheCBmcm9tIFwiLi9jb21wb25lbnRzL2JhY2tncm91bmRQYXJhbGF4LmpzXCI7XG5pbXBvcnQgU2hhZG93RmxvdyBmcm9tIFwiLi9jb21wb25lbnRzL3NoYWRvd0Zsb3cuanNcIjtcblxudmFyIG9mZnNldFRvcCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICB2YXIgdG9wID0gMCwgbGVmdCA9IDA7XG4gICAgZG8ge1xuICAgICAgICB0b3AgKz0gZWxlbWVudC5vZmZzZXRUb3AgIHx8IDA7XG4gICAgICAgIGxlZnQgKz0gZWxlbWVudC5vZmZzZXRMZWZ0IHx8IDA7XG4gICAgICAgIGVsZW1lbnQgPSBlbGVtZW50Lm9mZnNldFBhcmVudDtcbiAgICB9IHdoaWxlKGVsZW1lbnQpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgdG9wOiB0b3AsXG4gICAgICAgIGxlZnQ6IGxlZnRcbiAgICB9O1xufTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMod2luZG93LCB7XG4gICAgc2Nyb2xsVG9wOiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wKSB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHNjcm9sbFRvcCA9ICgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wKTtcbiAgICAgICAgICAgIHNjcm9sbFRvcCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cbmZ1bmN0aW9uIG1hbmFnZUhvbWVDYXJvdXNlbCgpe1xuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNob21lLWNhcm91c2VsXCIpKSB7XG4gICAgdmFyIHNlY3Rpb25DYXJvdXNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYW5jaG9yLTJcIik7XG5cbiAgICB2YXIgdGh1bWJuYWlscyA9IG5ldyBUaHVtYm5haWxzKHNlY3Rpb25DYXJvdXNlbC5xdWVyeVNlbGVjdG9yKFwiLnRodW1ibmFpbHNcIikpO1xuICAgIHZhciBjYXJvdXNlbCA9IG5ldyBDYXJvdXNlbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2hvbWUtY2Fyb3VzZWxcIikpO1xuICAgIGNhcm91c2VsLm9uQ2hhbmdlID0gZnVuY3Rpb24oY3VycmVudCwgbGFzdCwgcmFuaykge1xuICAgICAgLy9sYXN0LnF1ZXJ5U2VsZWN0b3IoXCIuYnRuLW1vcnBoLWNyb3NzXCIpLmNsaWNrKCk7XG4gICAgICB2YXIgdG9nZ2xlciA9IFRvZ2dsZXJNYW5hZ2VyLmZpbmRCeUVsZW1lbnQobGFzdC5xdWVyeVNlbGVjdG9yKFwiLmJ0bi1tb3JwaC1jcm9zc1wiKSk7XG4gICAgICBpZiggdG9nZ2xlciAmJiB0b2dnbGVyLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYnRuLW1vcnBoLWNyb3NzLS1hY3RpdmVcIikgKSB7XG4gICAgICAgIHRvZ2dsZXIudG9nZ2xlKCk7XG4gICAgICB9XG4gICAgICB0aHVtYm5haWxzLmN1cnJlbnQgPSByYW5rO1xuICAgIH1cbiAgfVxufVxuXG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbigpe1xuICBtYW5hZ2VIb21lQ2Fyb3VzZWwoKTtcbiAgVG9nZ2xlck1hbmFnZXIuaW5pdCgpO1xuICBCYWNrZ3JvdW5kUGFyYWxheC5pbml0KCk7XG4gIFNoYWRvd0Zsb3cuaW5pdCgpO1xufSkiXX0="}