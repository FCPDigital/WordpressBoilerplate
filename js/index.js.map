{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/components/backgroundParalax.js","src/js/components/carousel.js","src/js/components/shadowFlow.js","src/js/components/thumbnails.js","src/js/components/toggler.js","src/js/index.js","src/js/utils/html.js","src/js/utils/raf.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import requestAnimationFrame from \"./../utils/raf.js\"\n\nvar BackgroundParalax = {\n\n  update: function(element, event) {\n    var position = offsetTop(element);\n    position.left += element.offsetWidth/2;\n    position.top += element.offsetHeight/2;\n\n    var intensity = {\n      left: (position.left - event.clientX) / 150,\n      top: (position.top - event.clientY) / 100 \n    }\n    \n    element.style.textShadow = intensity.left + \"px \" + intensity.top + \"px 10px rgba(0, 0, 0, .5)\" \n  },\n\n  updateAll: function(event){\n    for(var i=0; i<this.elements.length; i++) {\n      this.update(this.elements[i], event)\n    }\n  },\n\n  initEvent: function(element) {\n    var image = new Image();\n    image.src = element.style.backgroundImage.match(/url\\([\"']?([^\"']*)[\"']?\\)/)[1];\n\n    var ratio = element.offsetWidth / element.offsetHeight;\n    var bgRatio = image.width/image.height;\n    var value = {left: 0, top: 0}\n    var targetValue = {left: 0, top: 0}\n    var animate = false;\n\n    var raf = function(){\n      value = {\n        left: value.left + (targetValue.left - value.left)*0.1,\n        top: value.top + (targetValue.top - value.top)*0.1\n      }\n\n      element.style.backgroundPosition = (50 + ease(value.left)*4) + \"%\" + (50 + ease(value.top)*4) + \"%\";\n\n      if( Math.abs(value.left - targetValue.left) < 0.001 && Math.abs(value.top - targetValue.top) < 0.001 ) {\n        animate = false\n        return;\n      }\n      \n      requestAnimationFrame(raf);\n    }\n\n    var start = function(){\n      if(animate){\n        return; \n      }\n      animate = true; \n      requestAnimationFrame(raf);\n    }\n\n    function ease(t) {\n      return -t * (t - 2.0);\n    }\n\n    window.addEventListener(\"resize\", function() {\n      ratio = element.offsetWidth / element.offsetHeight;\n    })\n\n    element.addEventListener(\"mousemove\", function(e) {\n      var scale = 1.3;\n      var size = ratio > bgRatio ? \"130% auto\" : \"auto 130%\"  \n            \n      targetValue = {\n        left: (e.clientX - element.offsetWidth/2) / (element.offsetWidth/2),\n        top: (e.clientY + window.scrollTop - element.offsetHeight/2) / (element.offsetHeight/2)\n      }\n    \n      element.style.backgroundSize = size\n      start();\n      //requestAnimationFrame(raf);\n    })\n\n   \n    raf();\n  },\n\n  initEvents: function() {\n    var self = this;\n    for(var i=0; i<this.elements.length; i++) {\n      this.initEvent(this.elements[i]);\n    }\n  },\n\n\n  init: function() {\n    this.elements = document.querySelectorAll(\".paralax\");\n    this.initEvents();\n  }\n}\n\nexport default BackgroundParalax;","function Carousel(element) {\n  this.element = element;\n  this.headItems = this.element.querySelectorAll(\".carousel__header-item\");\n  this.items = this.element.querySelectorAll(\".carousel__body-item\"); \n  this._current = 0;\n  this.initEvents();\n}\n\nCarousel.prototype = {\n  get current() {\n    if( this._current >= 0 ) {\n      return this._current;\n    }\n    for(var i=0; i<this.headItems.length; i++) {\n      if( this.headItems[i].classList.contains(\"carousel__header-item--active\") ) {\n        return i;\n      }\n    }\n    this.current = 0; \n    return 0; \n  },\n\n  set current(value) {\n    if( value !== this.current ) {\n      this.hide(this.current);\n      setTimeout((function(){\n        this.show(value);\n      }).bind(this), 350)\n    }\n    var last = this._current; \n    this._current = value;\n    this.onChange.call(this, this.items[this.current], this.items[last], this.current);\n  },\n\n  getHead: function(rank){\n    return this.headItems[rank];\n  },\n\n  getBody: function(rank){\n    return this.items[rank];\n  },\n\n  hide: function(rank) {\n    this.headItems[rank].classList.remove(\"carousel__header-item--active\");\n    this.items[rank].classList.replace(\"carousel__body-item--visible\", \"carousel__body-item--hidding\");\n    setTimeout((function(){\n      this.items[rank].classList.replace(\"carousel__body-item--hidding\", \"carousel__body-item--hidden\");\n    }).bind(this), 350)\n  },\n\n  show: function(rank) {\n    this.headItems[rank].classList.add(\"carousel__header-item--active\");\n    this.items[rank].classList.replace(\"carousel__body-item--hidden\", \"carousel__body-item--hidding\");\n    this.items[rank].classList.replace(\"carousel__body-item--hidding\", \"carousel__body-item--visible\");\n  },\n\n  initHeadEvent: function(element, rank) {\n    var self = this;\n    element.addEventListener(\"click\", function(e){\n      self.current = rank;\n      e.preventDefault();\n    })\n  },\n\n  initEvents: function() {\n    for(var i=0; i<this.headItems.length; i++) {\n      this.initHeadEvent(this.headItems[i], i);\n    }\n  },\n\n  onChange: function(callback) {\n    this.onChange = callback;\n  }\n}\n\nexport default Carousel;","import {offsetTop} from \"./../utils/html.js\"\n\nvar ShadowFlow = {\n\n  update: function(element, event) {\n    var position = offsetTop(element);\n    position.left += element.offsetWidth/2;\n    position.top += element.offsetHeight/2;\n\n    var intensity = {\n      left: (position.left - event.clientX) / 150,\n      top: (position.top - event.clientY) / 100 \n    }\n    \n    element.style.textShadow = intensity.left + \"px \" + intensity.top + \"px 10px rgba(0, 0, 0, .5)\" \n  },\n\n  updateAll: function(event){\n    for(var i=0; i<this.elements.length; i++) {\n      this.update(this.elements[i], event)\n    }\n  },\n\n  initEvents: function() {\n    var self = this;\n    window.addEventListener(\"mousemove\", self.updateAll.bind(this))\n  },\n\n  init: function() {\n    this.elements = document.querySelectorAll(\".shadow-flow\");\n    this.initEvents();\n  }\n}\n\n\n\nexport default ShadowFlow;","function Thumbnails(element) {\n  this.element = element;\n  this.items = element.querySelectorAll(\".thumbnail\");\n  this._current = null;\n}\n\nThumbnails.prototype = {\n\n  get current(){\n    if( this._current >= 0 ){\n      return this._current;\n    }\n    this.current = 0; \n    return 0; \n  },\n\n  set current(value) {\n    if( this._current ) {\n      this.hide(this.current);\n    } \n\n    this.show(value);\n    this._current = value;\n  },\n\n  hide: function(rank) {\n    this.items[rank].classList.replace(\"thumbnail--visible\", \"thumbnail--hidden\");\n  },\n \n  show: function(rank) {\n    this.items[rank].classList.replace(\"thumbnail--hidden\", \"thumbnail--visible\");\n  }\n}\n\n\nexport default Thumbnails;","function Toggler(element) {\n  this.element = element;\n  this.getTargets();\n  this.initEvents();\n}\n\nToggler.prototype = {\n\n  getTargets: function() {\n    this.selectors = this.element.getAttribute(\"data-toggle-target\").split(/,\\s?/);\n    this.modifiers = this.element.getAttribute(\"data-toggle-modifier\").split(/,\\s?/);\n    this.targets = [];\n    for(var i=0; i<this.selectors.length; i++) {\n      this.targets.push(document.querySelector(this.selectors[i]));\n      if( !this.modifiers[i] ) {\n        this.modifiers[i] = \"hidden\";\n      }\n    }\n  },\n\n  toggle: function(){\n    for(var i=0; i<this.targets.length; i++) {\n      this.targets[i].classList.toggle(this.modifiers[i])\n    }\n  },\n\n  initEvents: function() {\n    var self = this;\n    this.element.addEventListener(\"click\", function(e){\n      self.toggle();\n      e.preventDefault();\n    })\n  }\n}\n\nvar TogglerManager = {\n\n  togglers: [],\n\n  findByElement: function(element) {\n    for(var i=0; i<this.togglers.length; i++) {\n      if(this.togglers[i].element === element) {\n        return this.togglers[i]\n      }\n    }\n  },\n  \n  init: function() {\n    var elements = document.querySelectorAll(\"*[data-toggle-target]\");\n    for(var i=0; i<elements.length; i++) {\n      this.togglers.push(new Toggler(elements[i]));\n    }\n  }\n}\n\nexport {Toggler};\n\nexport default TogglerManager;","import Carousel from \"./components/carousel.js\";\nimport Thumbnails from \"./components/thumbnails.js\";\nimport TogglerManager from \"./components/toggler.js\";\nimport {Toggler} from \"./components/toggler.js\";\nimport BackgroundParalax from \"./components/backgroundParalax.js\";\nimport ShadowFlow from \"./components/shadowFlow.js\";\n\n\n\nfunction manageHomeCarousel(){\n  if (document.querySelector(\"#home-carousel\")) {\n    var sectionCarousel = document.querySelector(\"#anchor-2\");\n\n    var thumbnails = new Thumbnails(sectionCarousel.querySelector(\".thumbnails\"));\n    var carousel = new Carousel(document.querySelector(\"#home-carousel\"));\n    carousel.onChange = function(current, last, rank) {\n      //last.querySelector(\".btn-morph-cross\").click();\n      var toggler = TogglerManager.findByElement(last.querySelector(\".btn-morph-cross\"));\n      if( toggler && toggler.element.classList.contains(\"btn-morph-cross--active\") ) {\n        toggler.toggle();\n      }\n      thumbnails.current = rank;\n    }\n  }\n}\n\n\nwindow.addEventListener(\"load\", function(){\n  manageHomeCarousel();\n  TogglerManager.init();\n  BackgroundParalax.init();\n  ShadowFlow.init();\n})","Object.defineProperties(window, {\r\n    scrollTop: {\r\n        get: function() {\r\n            return (document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop;\r\n        },\r\n        set: function(value) {\r\n            var scrollTop = ((document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop);\r\n            scrollTop = value;\r\n        }\r\n    }\r\n});\r\n\r\nvar offsetTop = function(element) {\r\n    var top = 0, left = 0;\r\n    do {\r\n        top += element.offsetTop  || 0;\r\n        left += element.offsetLeft || 0;\r\n        element = element.offsetParent;\r\n    } while(element);\r\n\r\n    return {\r\n        top: top,\r\n        left: left\r\n    };\r\n};\r\n\r\nexport {offsetTop};","\r\n/**\r\n * Provides requestAnimationFrame in a cross browser way.\r\n * @author paulirish / http://paulirish.com/\r\n */\r\n\r\n\r\nif ( !window.requestAnimationFrame ) {\r\n\r\n\twindow.requestAnimationFrame = ( function() {\r\n\r\n\t\treturn window.webkitRequestAnimationFrame ||\r\n\t\twindow.mozRequestAnimationFrame ||\r\n\t\twindow.oRequestAnimationFrame ||\r\n\t\twindow.msRequestAnimationFrame ||\r\n\t\tfunction( /* function FrameRequestCallback */ callback, /* DOMElement Element */ element ) {\r\n\r\n\t\t\twindow.setTimeout( callback, 1000 / 60 );\r\n\r\n\t\t};\r\n\r\n\t} )();\r\n\r\n}\r\n\r\nif ( !window.cancelAnimationFrame ){\r\n    window.cancelAnimationFrame = function(id) {\r\n        clearTimeout(id);\r\n    };\r\n}\r\n\r\nexport default window.requestAnimationFrame;"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY29tcG9uZW50cy9iYWNrZ3JvdW5kUGFyYWxheC5qcyIsInNyYy9qcy9jb21wb25lbnRzL2Nhcm91c2VsLmpzIiwic3JjL2pzL2NvbXBvbmVudHMvc2hhZG93Rmxvdy5qcyIsInNyYy9qcy9jb21wb25lbnRzL3RodW1ibmFpbHMuanMiLCJzcmMvanMvY29tcG9uZW50cy90b2dnbGVyLmpzIiwic3JjL2pzL2luZGV4LmpzIiwic3JjL2pzL3V0aWxzL2h0bWwuanMiLCJzcmMvanMvdXRpbHMvcmFmLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7OztBQ0FBOzs7Ozs7QUFFQSxJQUFJLG9CQUFvQjs7QUFFdEIsVUFBUSxnQkFBUyxPQUFULEVBQWtCLEtBQWxCLEVBQXlCO0FBQy9CLFFBQUksV0FBVyxVQUFVLE9BQVYsQ0FBZjtBQUNBLGFBQVMsSUFBVCxJQUFpQixRQUFRLFdBQVIsR0FBb0IsQ0FBckM7QUFDQSxhQUFTLEdBQVQsSUFBZ0IsUUFBUSxZQUFSLEdBQXFCLENBQXJDOztBQUVBLFFBQUksWUFBWTtBQUNkLFlBQU0sQ0FBQyxTQUFTLElBQVQsR0FBZ0IsTUFBTSxPQUF2QixJQUFrQyxHQUQxQjtBQUVkLFdBQUssQ0FBQyxTQUFTLEdBQVQsR0FBZSxNQUFNLE9BQXRCLElBQWlDO0FBRnhCLEtBQWhCOztBQUtBLFlBQVEsS0FBUixDQUFjLFVBQWQsR0FBMkIsVUFBVSxJQUFWLEdBQWlCLEtBQWpCLEdBQXlCLFVBQVUsR0FBbkMsR0FBeUMsMkJBQXBFO0FBQ0QsR0FicUI7O0FBZXRCLGFBQVcsbUJBQVMsS0FBVCxFQUFlO0FBQ3hCLFNBQUksSUFBSSxJQUFFLENBQVYsRUFBYSxJQUFFLEtBQUssUUFBTCxDQUFjLE1BQTdCLEVBQXFDLEdBQXJDLEVBQTBDO0FBQ3hDLFdBQUssTUFBTCxDQUFZLEtBQUssUUFBTCxDQUFjLENBQWQsQ0FBWixFQUE4QixLQUE5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SCxjQUFNO0FBRkgsS0FBUDtBQUlILENBWkQ7O1FBY1EsUyxHQUFBLFM7Ozs7Ozs7QUN6QlI7Ozs7O0FBTUEsSUFBSyxDQUFDLE9BQU8scUJBQWIsRUFBcUM7O0FBRXBDLFFBQU8scUJBQVAsR0FBaUMsWUFBVzs7QUFFM0MsU0FBTyxPQUFPLDJCQUFQLElBQ1AsT0FBTyx3QkFEQSxJQUVQLE9BQU8sc0JBRkEsSUFHUCxPQUFPLHVCQUhBLElBSVAsV0FBVSxtQ0FBb0MsUUFBOUMsRUFBd0Qsd0JBQXlCLE9BQWpGLEVBQTJGOztBQUUxRixVQUFPLFVBQVAsQ0FBbUIsUUFBbkIsRUFBNkIsT0FBTyxFQUFwQztBQUVBLEdBUkQ7QUFVQSxFQVo4QixFQUEvQjtBQWNBOztBQUVELElBQUssQ0FBQyxPQUFPLG9CQUFiLEVBQW1DO0FBQy9CLFFBQU8sb0JBQVAsR0FBOEIsVUFBUyxFQUFULEVBQWE7QUFDdkMsZUFBYSxFQUFiO0FBQ0gsRUFGRDtBQUdIOztrQkFFYyxPQUFPLHFCIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiaW1wb3J0IHJlcXVlc3RBbmltYXRpb25GcmFtZSBmcm9tIFwiLi8uLi91dGlscy9yYWYuanNcIlxuXG52YXIgQmFja2dyb3VuZFBhcmFsYXggPSB7XG5cbiAgdXBkYXRlOiBmdW5jdGlvbihlbGVtZW50LCBldmVudCkge1xuICAgIHZhciBwb3NpdGlvbiA9IG9mZnNldFRvcChlbGVtZW50KTtcbiAgICBwb3NpdGlvbi5sZWZ0ICs9IGVsZW1lbnQub2Zmc2V0V2lkdGgvMjtcbiAgICBwb3NpdGlvbi50b3AgKz0gZWxlbWVudC5vZmZzZXRIZWlnaHQvMjtcblxuICAgIHZhciBpbnRlbnNpdHkgPSB7XG4gICAgICBsZWZ0OiAocG9zaXRpb24ubGVmdCAtIGV2ZW50LmNsaWVudFgpIC8gMTUwLFxuICAgICAgdG9wOiAocG9zaXRpb24udG9wIC0gZXZlbnQuY2xpZW50WSkgLyAxMDAgXG4gICAgfVxuICAgIFxuICAgIGVsZW1lbnQuc3R5bGUudGV4dFNoYWRvdyA9IGludGVuc2l0eS5sZWZ0ICsgXCJweCBcIiArIGludGVuc2l0eS50b3AgKyBcInB4IDEwcHggcmdiYSgwLCAwLCAwLCAuNSlcIiBcbiAgfSxcblxuICB1cGRhdGVBbGw6IGZ1bmN0aW9uKGV2ZW50KXtcbiAgICBmb3IodmFyIGk9MDsgaTx0aGlzLmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnVwZGF0ZSh0aGlzLmVsZW1lbnRzW2ldLCBldmVudClcbiAgICB9XG4gIH0sXG5cbiAgaW5pdEV2ZW50OiBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgaW1hZ2Uuc3JjID0gZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UubWF0Y2goL3VybFxcKFtcIiddPyhbXlwiJ10qKVtcIiddP1xcKS8pWzFdO1xuXG4gICAgdmFyIHJhdGlvID0gZWxlbWVudC5vZmZzZXRXaWR0aCAvIGVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgIHZhciBiZ1JhdGlvID0gaW1hZ2Uud2lkdGgvaW1hZ2UuaGVpZ2h0O1xuICAgIHZhciB2YWx1ZSA9IHtsZWZ0OiAwLCB0b3A6IDB9XG4gICAgdmFyIHRhcmdldFZhbHVlID0ge2xlZnQ6IDAsIHRvcDogMH1cbiAgICB2YXIgYW5pbWF0ZSA9IGZhbHNlO1xuXG4gICAgdmFyIHJhZiA9IGZ1bmN0aW9uKCl7XG4gICAgICB2YWx1ZSA9IHtcbiAgICAgICAgbGVmdDogdmFsdWUubGVmdCArICh0YXJnZXRWYWx1ZS5sZWZ0IC0gdmFsdWUubGVmdCkqMC4xLFxuICAgICAgICB0b3A6IHZhbHVlLnRvcCArICh0YXJnZXRWYWx1ZS50b3AgLSB2YWx1ZS50b3ApKjAuMVxuICAgICAgfVxuXG4gICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9ICg1MCArIGVhc2UodmFsdWUubGVmdCkqNCkgKyBcIiVcIiArICg1MCArIGVhc2UodmFsdWUudG9wKSo0KSArIFwiJVwiO1xuXG4gICAgICBpZiggTWF0aC5hYnModmFsdWUubGVmdCAtIHRhcmdldFZhbHVlLmxlZnQpIDwgMC4wMDEgJiYgTWF0aC5hYnModmFsdWUudG9wIC0gdGFyZ2V0VmFsdWUudG9wKSA8IDAuMDAxICkge1xuICAgICAgICBhbmltYXRlID0gZmFsc2VcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmFmKTtcbiAgICB9XG5cbiAgICB2YXIgc3RhcnQgPSBmdW5jdGlvbigpe1xuICAgICAgaWYoYW5pbWF0ZSl7XG4gICAgICAgIHJldHVybjsgXG4gICAgICB9XG4gICAgICBhbmltYXRlID0gdHJ1ZTsgXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmFmKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlYXNlKHQpIHtcbiAgICAgIHJldHVybiAtdCAqICh0IC0gMi4wKTtcbiAgICB9XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBmdW5jdGlvbigpIHtcbiAgICAgIHJhdGlvID0gZWxlbWVudC5vZmZzZXRXaWR0aCAvIGVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgIH0pXG5cbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHNjYWxlID0gMS4zO1xuICAgICAgdmFyIHNpemUgPSByYXRpbyA+IGJnUmF0aW8gPyBcIjEzMCUgYXV0b1wiIDogXCJhdXRvIDEzMCVcIiAgXG4gICAgICAgICAgICBcbiAgICAgIHRhcmdldFZhbHVlID0ge1xuICAgICAgICBsZWZ0OiAoZS5jbGllbnRYIC0gZWxlbWVudC5vZmZzZXRXaWR0aC8yKSAvIChlbGVtZW50Lm9mZnNldFdpZHRoLzIpLFxuICAgICAgICB0b3A6IChlLmNsaWVudFkgKyB3aW5kb3cuc2Nyb2xsVG9wIC0gZWxlbWVudC5vZmZzZXRIZWlnaHQvMikgLyAoZWxlbWVudC5vZmZzZXRIZWlnaHQvMilcbiAgICAgIH1cbiAgICBcbiAgICAgIGVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZFNpemUgPSBzaXplXG4gICAgICBzdGFydCgpO1xuICAgICAgLy9yZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmFmKTtcbiAgICB9KVxuXG4gICBcbiAgICByYWYoKTtcbiAgfSxcblxuICBpbml0RXZlbnRzOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgZm9yKHZhciBpPTA7IGk8dGhpcy5lbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5pbml0RXZlbnQodGhpcy5lbGVtZW50c1tpXSk7XG4gICAgfVxuICB9LFxuXG5cbiAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5lbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucGFyYWxheFwiKTtcbiAgICB0aGlzLmluaXRFdmVudHMoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCYWNrZ3JvdW5kUGFyYWxheDsiLCJmdW5jdGlvbiBDYXJvdXNlbChlbGVtZW50KSB7XG4gIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gIHRoaXMuaGVhZEl0ZW1zID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2Fyb3VzZWxfX2hlYWRlci1pdGVtXCIpO1xuICB0aGlzLml0ZW1zID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2Fyb3VzZWxfX2JvZHktaXRlbVwiKTsgXG4gIHRoaXMuX2N1cnJlbnQgPSAwO1xuICB0aGlzLmluaXRFdmVudHMoKTtcbn1cblxuQ2Fyb3VzZWwucHJvdG90eXBlID0ge1xuICBnZXQgY3VycmVudCgpIHtcbiAgICBpZiggdGhpcy5fY3VycmVudCA+PSAwICkge1xuICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnQ7XG4gICAgfVxuICAgIGZvcih2YXIgaT0wOyBpPHRoaXMuaGVhZEl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiggdGhpcy5oZWFkSXRlbXNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2Fyb3VzZWxfX2hlYWRlci1pdGVtLS1hY3RpdmVcIikgKSB7XG4gICAgICAgIHJldHVybiBpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmN1cnJlbnQgPSAwOyBcbiAgICByZXR1cm4gMDsgXG4gIH0sXG5cbiAgc2V0IGN1cnJlbnQodmFsdWUpIHtcbiAgICBpZiggdmFsdWUgIT09IHRoaXMuY3VycmVudCApIHtcbiAgICAgIHRoaXMuaGlkZSh0aGlzLmN1cnJlbnQpO1xuICAgICAgc2V0VGltZW91dCgoZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy5zaG93KHZhbHVlKTtcbiAgICAgIH0pLmJpbmQodGhpcyksIDM1MClcbiAgICB9XG4gICAgdmFyIGxhc3QgPSB0aGlzLl9jdXJyZW50OyBcbiAgICB0aGlzLl9jdXJyZW50ID0gdmFsdWU7XG4gICAgdGhpcy5vbkNoYW5nZS5jYWxsKHRoaXMsIHRoaXMuaXRlbXNbdGhpcy5jdXJyZW50XSwgdGhpcy5pdGVtc1tsYXN0XSwgdGhpcy5jdXJyZW50KTtcbiAgfSxcblxuICBnZXRIZWFkOiBmdW5jdGlvbihyYW5rKXtcbiAgICByZXR1cm4gdGhpcy5oZWFkSXRlbXNbcmFua107XG4gIH0sXG5cbiAgZ2V0Qm9keTogZnVuY3Rpb24ocmFuayl7XG4gICAgcmV0dXJuIHRoaXMuaXRlbXNbcmFua107XG4gIH0sXG5cbiAgaGlkZTogZnVuY3Rpb24ocmFuaykge1xuICAgIHRoaXMuaGVhZEl0ZW1zW3JhbmtdLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJvdXNlbF9faGVhZGVyLWl0ZW0tLWFjdGl2ZVwiKTtcbiAgICB0aGlzLml0ZW1zW3JhbmtdLmNsYXNzTGlzdC5yZXBsYWNlKFwiY2Fyb3VzZWxfX2JvZHktaXRlbS0tdmlzaWJsZVwiLCBcImNhcm91c2VsX19ib2R5LWl0ZW0tLWhpZGRpbmdcIik7XG4gICAgc2V0VGltZW91dCgoZnVuY3Rpb24oKXtcbiAgICAgIHRoaXMuaXRlbXNbcmFua10uY2xhc3NMaXN0LnJlcGxhY2UoXCJjYXJvdXNlbF9fYm9keS1pdGVtLS1oaWRkaW5nXCIsIFwiY2Fyb3VzZWxfX2JvZHktaXRlbS0taGlkZGVuXCIpO1xuICAgIH0pLmJpbmQodGhpcyksIDM1MClcbiAgfSxcblxuICBzaG93OiBmdW5jdGlvbihyYW5rKSB7XG4gICAgdGhpcy5oZWFkSXRlbXNbcmFua10uY2xhc3NMaXN0LmFkZChcImNhcm91c2VsX19oZWFkZXItaXRlbS0tYWN0aXZlXCIpO1xuICAgIHRoaXMuaXRlbXNbcmFua10uY2xhc3NMaXN0LnJlcGxhY2UoXCJjYXJvdXNlbF9fYm9keS1pdGVtLS1oaWRkZW5cIiwgXCJjYXJvdXNlbF9fYm9keS1pdGVtLS1oaWRkaW5nXCIpO1xuICAgIHRoaXMuaXRlbXNbcmFua10uY2xhc3NMaXN0LnJlcGxhY2UoXCJjYXJvdXNlbF9fYm9keS1pdGVtLS1oaWRkaW5nXCIsIFwiY2Fyb3VzZWxfX2JvZHktaXRlbS0tdmlzaWJsZVwiKTtcbiAgfSxcblxuICBpbml0SGVhZEV2ZW50OiBmdW5jdGlvbihlbGVtZW50LCByYW5rKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpe1xuICAgICAgc2VsZi5jdXJyZW50ID0gcmFuaztcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KVxuICB9LFxuXG4gIGluaXRFdmVudHM6IGZ1bmN0aW9uKCkge1xuICAgIGZvcih2YXIgaT0wOyBpPHRoaXMuaGVhZEl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLmluaXRIZWFkRXZlbnQodGhpcy5oZWFkSXRlbXNbaV0sIGkpO1xuICAgIH1cbiAgfSxcblxuICBvbkNoYW5nZTogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICB0aGlzLm9uQ2hhbmdlID0gY2FsbGJhY2s7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2Fyb3VzZWw7IiwiaW1wb3J0IHtvZmZzZXRUb3B9IGZyb20gXCIuLy4uL3V0aWxzL2h0bWwuanNcIlxuXG52YXIgU2hhZG93RmxvdyA9IHtcblxuICB1cGRhdGU6IGZ1bmN0aW9uKGVsZW1lbnQsIGV2ZW50KSB7XG4gICAgdmFyIHBvc2l0aW9uID0gb2Zmc2V0VG9wKGVsZW1lbnQpO1xuICAgIHBvc2l0aW9uLmxlZnQgKz0gZWxlbWVudC5vZmZzZXRXaWR0aC8yO1xuICAgIHBvc2l0aW9uLnRvcCArPSBlbGVtZW50Lm9mZnNldEhlaWdodC8yO1xuXG4gICAgdmFyIGludGVuc2l0eSA9IHtcbiAgICAgIGxlZnQ6IChwb3NpdGlvbi5sZWZ0IC0gZXZlbnQuY2xpZW50WCkgLyAxNTAsXG4gICAgICB0b3A6IChwb3NpdGlvbi50b3AgLSBldmVudC5jbGllbnRZKSAvIDEwMCBcbiAgICB9XG4gICAgXG4gICAgZWxlbWVudC5zdHlsZS50ZXh0U2hhZG93ID0gaW50ZW5zaXR5LmxlZnQgKyBcInB4IFwiICsgaW50ZW5zaXR5LnRvcCArIFwicHggMTBweCByZ2JhKDAsIDAsIDAsIC41KVwiIFxuICB9LFxuXG4gIHVwZGF0ZUFsbDogZnVuY3Rpb24oZXZlbnQpe1xuICAgIGZvcih2YXIgaT0wOyBpPHRoaXMuZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMudXBkYXRlKHRoaXMuZWxlbWVudHNbaV0sIGV2ZW50KVxuICAgIH1cbiAgfSxcblxuICBpbml0RXZlbnRzOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgc2VsZi51cGRhdGVBbGwuYmluZCh0aGlzKSlcbiAgfSxcblxuICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zaGFkb3ctZmxvd1wiKTtcbiAgICB0aGlzLmluaXRFdmVudHMoKTtcbiAgfVxufVxuXG5cblxuZXhwb3J0IGRlZmF1bHQgU2hhZG93RmxvdzsiLCJmdW5jdGlvbiBUaHVtYm5haWxzKGVsZW1lbnQpIHtcbiAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgdGhpcy5pdGVtcyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50aHVtYm5haWxcIik7XG4gIHRoaXMuX2N1cnJlbnQgPSBudWxsO1xufVxuXG5UaHVtYm5haWxzLnByb3RvdHlwZSA9IHtcblxuICBnZXQgY3VycmVudCgpe1xuICAgIGlmKCB0aGlzLl9jdXJyZW50ID49IDAgKXtcbiAgICAgIHJldHVybiB0aGlzLl9jdXJyZW50O1xuICAgIH1cbiAgICB0aGlzLmN1cnJlbnQgPSAwOyBcbiAgICByZXR1cm4gMDsgXG4gIH0sXG5cbiAgc2V0IGN1cnJlbnQodmFsdWUpIHtcbiAgICBpZiggdGhpcy5fY3VycmVudCApIHtcbiAgICAgIHRoaXMuaGlkZSh0aGlzLmN1cnJlbnQpO1xuICAgIH0gXG5cbiAgICB0aGlzLnNob3codmFsdWUpO1xuICAgIHRoaXMuX2N1cnJlbnQgPSB2YWx1ZTtcbiAgfSxcblxuICBoaWRlOiBmdW5jdGlvbihyYW5rKSB7XG4gICAgdGhpcy5pdGVtc1tyYW5rXS5jbGFzc0xpc3QucmVwbGFjZShcInRodW1ibmFpbC0tdmlzaWJsZVwiLCBcInRodW1ibmFpbC0taGlkZGVuXCIpO1xuICB9LFxuIFxuICBzaG93OiBmdW5jdGlvbihyYW5rKSB7XG4gICAgdGhpcy5pdGVtc1tyYW5rXS5jbGFzc0xpc3QucmVwbGFjZShcInRodW1ibmFpbC0taGlkZGVuXCIsIFwidGh1bWJuYWlsLS12aXNpYmxlXCIpO1xuICB9XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgVGh1bWJuYWlsczsiLCJmdW5jdGlvbiBUb2dnbGVyKGVsZW1lbnQpIHtcbiAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgdGhpcy5nZXRUYXJnZXRzKCk7XG4gIHRoaXMuaW5pdEV2ZW50cygpO1xufVxuXG5Ub2dnbGVyLnByb3RvdHlwZSA9IHtcblxuICBnZXRUYXJnZXRzOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnNlbGVjdG9ycyA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXRvZ2dsZS10YXJnZXRcIikuc3BsaXQoLyxcXHM/Lyk7XG4gICAgdGhpcy5tb2RpZmllcnMgPSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS10b2dnbGUtbW9kaWZpZXJcIikuc3BsaXQoLyxcXHM/Lyk7XG4gICAgdGhpcy50YXJnZXRzID0gW107XG4gICAgZm9yKHZhciBpPTA7IGk8dGhpcy5zZWxlY3RvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMudGFyZ2V0cy5wdXNoKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5zZWxlY3RvcnNbaV0pKTtcbiAgICAgIGlmKCAhdGhpcy5tb2RpZmllcnNbaV0gKSB7XG4gICAgICAgIHRoaXMubW9kaWZpZXJzW2ldID0gXCJoaWRkZW5cIjtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgdG9nZ2xlOiBmdW5jdGlvbigpe1xuICAgIGZvcih2YXIgaT0wOyBpPHRoaXMudGFyZ2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy50YXJnZXRzW2ldLmNsYXNzTGlzdC50b2dnbGUodGhpcy5tb2RpZmllcnNbaV0pXG4gICAgfVxuICB9LFxuXG4gIGluaXRFdmVudHM6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpe1xuICAgICAgc2VsZi50b2dnbGUoKTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KVxuICB9XG59XG5cbnZhciBUb2dnbGVyTWFuYWdlciA9IHtcblxuICB0b2dnbGVyczogW10sXG5cbiAgZmluZEJ5RWxlbWVudDogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIGZvcih2YXIgaT0wOyBpPHRoaXMudG9nZ2xlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmKHRoaXMudG9nZ2xlcnNbaV0uZWxlbWVudCA9PT0gZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b2dnbGVyc1tpXVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgXG4gIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIqW2RhdGEtdG9nZ2xlLXRhcmdldF1cIik7XG4gICAgZm9yKHZhciBpPTA7IGk8ZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMudG9nZ2xlcnMucHVzaChuZXcgVG9nZ2xlcihlbGVtZW50c1tpXSkpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQge1RvZ2dsZXJ9O1xuXG5leHBvcnQgZGVmYXVsdCBUb2dnbGVyTWFuYWdlcjsiLCJpbXBvcnQgQ2Fyb3VzZWwgZnJvbSBcIi4vY29tcG9uZW50cy9jYXJvdXNlbC5qc1wiO1xuaW1wb3J0IFRodW1ibmFpbHMgZnJvbSBcIi4vY29tcG9uZW50cy90aHVtYm5haWxzLmpzXCI7XG5pbXBvcnQgVG9nZ2xlck1hbmFnZXIgZnJvbSBcIi4vY29tcG9uZW50cy90b2dnbGVyLmpzXCI7XG5pbXBvcnQge1RvZ2dsZXJ9IGZyb20gXCIuL2NvbXBvbmVudHMvdG9nZ2xlci5qc1wiO1xuaW1wb3J0IEJhY2tncm91bmRQYXJhbGF4IGZyb20gXCIuL2NvbXBvbmVudHMvYmFja2dyb3VuZFBhcmFsYXguanNcIjtcbmltcG9ydCBTaGFkb3dGbG93IGZyb20gXCIuL2NvbXBvbmVudHMvc2hhZG93Rmxvdy5qc1wiO1xuXG5cblxuZnVuY3Rpb24gbWFuYWdlSG9tZUNhcm91c2VsKCl7XG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2hvbWUtY2Fyb3VzZWxcIikpIHtcbiAgICB2YXIgc2VjdGlvbkNhcm91c2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhbmNob3ItMlwiKTtcblxuICAgIHZhciB0aHVtYm5haWxzID0gbmV3IFRodW1ibmFpbHMoc2VjdGlvbkNhcm91c2VsLnF1ZXJ5U2VsZWN0b3IoXCIudGh1bWJuYWlsc1wiKSk7XG4gICAgdmFyIGNhcm91c2VsID0gbmV3IENhcm91c2VsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaG9tZS1jYXJvdXNlbFwiKSk7XG4gICAgY2Fyb3VzZWwub25DaGFuZ2UgPSBmdW5jdGlvbihjdXJyZW50LCBsYXN0LCByYW5rKSB7XG4gICAgICAvL2xhc3QucXVlcnlTZWxlY3RvcihcIi5idG4tbW9ycGgtY3Jvc3NcIikuY2xpY2soKTtcbiAgICAgIHZhciB0b2dnbGVyID0gVG9nZ2xlck1hbmFnZXIuZmluZEJ5RWxlbWVudChsYXN0LnF1ZXJ5U2VsZWN0b3IoXCIuYnRuLW1vcnBoLWNyb3NzXCIpKTtcbiAgICAgIGlmKCB0b2dnbGVyICYmIHRvZ2dsZXIuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJidG4tbW9ycGgtY3Jvc3MtLWFjdGl2ZVwiKSApIHtcbiAgICAgICAgdG9nZ2xlci50b2dnbGUoKTtcbiAgICAgIH1cbiAgICAgIHRodW1ibmFpbHMuY3VycmVudCA9IHJhbms7XG4gICAgfVxuICB9XG59XG5cblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uKCl7XG4gIG1hbmFnZUhvbWVDYXJvdXNlbCgpO1xuICBUb2dnbGVyTWFuYWdlci5pbml0KCk7XG4gIEJhY2tncm91bmRQYXJhbGF4LmluaXQoKTtcbiAgU2hhZG93Rmxvdy5pbml0KCk7XG59KSIsIk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHdpbmRvdywge1xyXG4gICAgc2Nyb2xsVG9wOiB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCkgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSAoKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wKSB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCk7XHJcbiAgICAgICAgICAgIHNjcm9sbFRvcCA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSk7XHJcblxyXG52YXIgb2Zmc2V0VG9wID0gZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgdmFyIHRvcCA9IDAsIGxlZnQgPSAwO1xyXG4gICAgZG8ge1xyXG4gICAgICAgIHRvcCArPSBlbGVtZW50Lm9mZnNldFRvcCAgfHwgMDtcclxuICAgICAgICBsZWZ0ICs9IGVsZW1lbnQub2Zmc2V0TGVmdCB8fCAwO1xyXG4gICAgICAgIGVsZW1lbnQgPSBlbGVtZW50Lm9mZnNldFBhcmVudDtcclxuICAgIH0gd2hpbGUoZWxlbWVudCk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB0b3A6IHRvcCxcclxuICAgICAgICBsZWZ0OiBsZWZ0XHJcbiAgICB9O1xyXG59O1xyXG5cclxuZXhwb3J0IHtvZmZzZXRUb3B9OyIsIlxyXG4vKipcclxuICogUHJvdmlkZXMgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIGluIGEgY3Jvc3MgYnJvd3NlciB3YXkuXHJcbiAqIEBhdXRob3IgcGF1bGlyaXNoIC8gaHR0cDovL3BhdWxpcmlzaC5jb20vXHJcbiAqL1xyXG5cclxuXHJcbmlmICggIXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgKSB7XHJcblxyXG5cdHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSAoIGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdHJldHVybiB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XHJcblx0XHR3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XHJcblx0XHR3aW5kb3cub1JlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxyXG5cdFx0d2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XHJcblx0XHRmdW5jdGlvbiggLyogZnVuY3Rpb24gRnJhbWVSZXF1ZXN0Q2FsbGJhY2sgKi8gY2FsbGJhY2ssIC8qIERPTUVsZW1lbnQgRWxlbWVudCAqLyBlbGVtZW50ICkge1xyXG5cclxuXHRcdFx0d2luZG93LnNldFRpbWVvdXQoIGNhbGxiYWNrLCAxMDAwIC8gNjAgKTtcclxuXHJcblx0XHR9O1xyXG5cclxuXHR9ICkoKTtcclxuXHJcbn1cclxuXHJcbmlmICggIXdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSApe1xyXG4gICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICBjbGVhclRpbWVvdXQoaWQpO1xyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTsiXX0="}